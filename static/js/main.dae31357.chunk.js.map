{"version":3,"sources":["views/SplashScreen/logo.js","views/SplashScreen/SplashScreen.js","views/SplashScreen/AnimatedLogo.js","views/StaticSplashScreen/StaticSplashScreen.js","general/SkipIntroLink/SkipIntroLink.js","headers/AtlasIntroHeader/AtlasIntroHeader.js","views/AtlasIntro/AtlasIntro.js","general/IntroLink/IntroLink.js","general/MainMenu/MainMenu.js","headers/HamburgerIntroHeader/HamburgerIntroHeader.js","general/SlidingPanel/SlidingPanel.js","views/Compass/Compass.js","general/CompassButton/CompassButton.js","headers/HamburgerCompassHeader/HamburgerCompassHeader.js","views/PhenomenaIntro/LinkParagraph.js","general/ArrowButton/ArrowButton.js","views/PhenomenaIntro/PhenomenaIntro.js","views/CategoryEntryBlock/CategoryEntryBlock.js","views/ProcessIntro/ProcessIntro.js","views/ProblemIntro/ProblemIntro.js","views/NavMenu/NavMenu.js","views/ViewSelector/ViewSelector.js","general/BackFromMainMenu/BackFromMainMenu.js","headers/HamburgerMenuHeader.js","views/HamburgerMenu/HamburgerMenu.js","utilities/GlobalData.js","general/PageTitle/PageTitle.js","general/MoreInfo/MoreInfo.js","general/Bussola/Bussola.js","general/Loading/Loading.js","general/Options/Options.js","general/Search/Search.js","general/RangeFilter/range-filter.d3.js","visualizations/PlacesMatrix/matrix.d3.js","general/RangeFilter/RangeFilter.js","utilities/parse-matrix-data.js","visualizations/PlacesMatrix/PlacesMatrix.js","Trasformare/Trasformare.js","views/Itineraries/Itineraries.js","headers/Footer/Footer.js","views/AboutAndContacts/AboutAndContacts.js","views/ToolsAndMethods/ToolMethodCell.js","views/ToolsAndMethods/ToolsAndMethods.js","views/PressReview/PressReview.js","views/Articles/Articles.js","views/AtlasRouter/AtlasRouter.js","App.js","serviceWorker.js","index.js"],"names":["V","initialize","el","data","destroy","SplashScreen","React","Component","props","loadData","bind","state","isLoading","d3","then","xml","setState","this","console","log","documentElement","className","id","dangerouslySetInnerHTML","__html","StaticSplashScreen","to","src","process","SkipIntroLink","style","AtlasIntroHeader","gridColumn","AtlasIntro","render_impl","headerHeight","window","getComputedStyle","document","getPropertyValue","headerHeight_n","Number","parseInt","substring","length","gridHeight","innerHeight","getVisibleItemInitialY","getDeltaY","transitionData","top","percent","zIndex","phasesUp","compassIntroUp","navMenuUp","makeCompassPermanent","history","push","sections","render","withRouter","IntroLink","MainMenu","icon","faBars","defaultProps","HamburgerIntroHeader","SlidingPanel","setWrapperRef","handleClick","addEventListener","removeEventListener","node","wrapperRef","event","contains","target","panelClicked","interactiveViewLink","interactiveViewUrl","href","open","openClassName","closedClassName","ref","title","pdfUrl","faLink","text","Compass","selectedPanel","getSelectedPanel","setSelectedPanel","panelId","CompassButton","faCompass","HamburgerCompassHeader","color","backgroundColor","LinkParagraph","route","linkText","description","ArrowButton","line","leftLine","points","rightLine","arrowDirection","width","textAlign","PhenomenaIntro","type","class","CategoryEntryBlock","smallTitle","ProcessIntro","ProblemIntro","ViewSelector","children","Children","toArray","the_link","includes","map","d","i","this_class","dataClass","key","BackFromMainMenu","useHistory","onClick","goBack","faMinus","HamburgerMenuHeader","HamburgerMenu","GlobalData","allVolumes","PageTitle","MoreInfo","faQuestionCircle","Bussola","Loading","Options","show","undefined","selection","multiple","options","filter","status","label","handleChange","toggleDropDown","reset","newOptions","slice","forEach","changeOptions","ee","name","getAttribute","selected_item","isOpen","metadata","source","Dropdown","onToggle","Toggle","Menu","Item","Search","fontSize","position","onChange","selected","svg","context","gBrush","info","height","funcChangeSpan","margin","Viz","changeSpan","select","right","bottom","getBoundingClientRect","parseFloat","left","x","range","domain","brush","extent","handleSize","on","brushed","append","attr","classed","selectAll","call","move","span","exit","remove","enter","scale","getAnchor","getFullYear","merge","sourceEvent","invert","Date","update","originalData","graph","globalTimeFilter","y","r","originalLabelsSize","xAxisCall","yAxisCall","g","g_forceLayout","xAxis","yAxis","hull","link","presumed","information","simulation","RangeFilter","_chart","_rootNode","componentNode","_setRef","ParseMatrixData","rawData","year","split","hierarchies","handleHierarchies","calculateNetwork","nodes","part_of","entries","values","part_of_d","find","e","subNodes","totalSubNodes","part_of_e","f","part_of_f","part_of_g","h","edges","n","obj","categories","categoriesColors","links","hullsData","last","_originalData","_onChangeCategorie","_resetFilter","timeStamp","ticks","every","padding","tickSize","tickFormat","replace","exponent","step","selectedCategory","size","nnn","closeSubnodes","toOpen","n0","category","indexOf","n1","n2","openSubnodes","toClose","force","thisCollisionPadding","collisionPadding","opened","strength","iterations","distance","convexHull","roundedHull","stop","zoom","translateExtent","scaleExtent","transform","new_x","rescaleX","newSize","k","timeFilter","fx","correspondingYear","l","displayTitle","toggleSubnodes","unselectNode","unselectLabel","selectLabel","selectSameComposition","darker","isGuessed","kind","alpha","restart","selectLabelsArr","applyFilter","an_id","openOnSearch","arr","parents2open","s","search4Parent","nodeId","thisNode","od","reverse","parentId","parent_id","parent","openAll","runAll","nodesList","closeAll","doRestart","fy","subNode","thisHullNodes","concat","thisHull","augmentedNodes","subNodes2Remove","hulls2Remove","collectSubNodes","parentNode","childNode","toRemove","filtered","Array","isArray","sourceTitle","doReset","alsoCategories","hullPadding","vecScale","v","vecSum","pv1","pv2","unitNormal","p0","p1","nLength","Math","sqrt","polyPoints","roundedHull1","roundedHull2","segments","segmentIndex","offset","arcData","join","segment","index","pathFragment","p2","offsetVector","invOffsetVector","p3","PlacesMatrix","onChangeCategorie","resetFilter","prevProps","prevState","searched","selectThoseLabels","gruppi","Trasformare","changeCercaPer","changeRicerca","changeGruppi","changePubblicazioni","changeAmbienti","changeCategorie","changeTimeSpan","downloadData","cerca_per","parser","themes","flat","kinds","publicationType","environments","allTitles","pubVenueTitle","nodesByPublicationTitle","publishedHere","searchByCompositionTitle","dd","data_research","luogo","sort","a","b","localeCompare","titolo","time","noFilter","ricerca","toPreserveRicerca","pubblicazioni","ricercaOptionsSearched","toPreservePubblicazioni","volumi","toPreserveVolumi","ambienti","toPreserveAmbienti","toPreserveCategorie","timeExtent","error","research_options","statoGruppi","toPreserve","_","flattenDeep","intersection","criteria","value","ambientiOptions","pubblicazioniOptions","selectedData","export_data","composition_id","composition_title","the_date","filename","file","Blob","navigator","msSaveOrOpenBlob","createElement","url","URL","createObjectURL","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","Itineraries","Footer","AboutAndContacts","data-show-count","async","charset","ToolMethodCell","renderMethodCell","renderToolCell","ToolsAndMethods","PressReview","section","externalLink","archiveLink","archive","venue","date","pages","Articles","externalLinkLink","authors","abstract","AtlasRouter","basename","exact","path","App","Boolean","location","hostname","match","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dae31357.chunk.js","sourcesContent":["\nimport * as d3 from 'd3';\nimport * as SVGPoints from 'svg-points';\n\nconst V = {};\nconst svgUrl = \"./assets/logo-big-polygons-01.svg\";\n\nconst margin = { top : 0, right : 50, bottom : 30, left : 50 };\nlet width, height;\n\nlet svg;\n\n/*\nd3\n  .xml(svgUrl)\n  .then(function(xml) {\n\n    document\n      .getElementById('logo-box')\n      .appendChild(xml.documentElement);\n\n    d3\n      .select('#logo-box')\n      .append('h2')\n      .attr('class', 'text-center')\n      .style('opacity', 0)\n      .style('letter-spacing', '-0.5px')\n      .html(`\n        <span lang=\"it-IT\">Letteratura e visualizzazione</span>\n        <span lang=\"fr-FR\">Littérature et visualisation</span>\n        <span lang=\"en-UK\">Literature and Visualization</span>\n      `);\n\n    let calogo = d3.select(\"#calogo\");\n\n    let width = calogo\n      .attr(\"viewBox\")\n      .split(' ')[2];\n\n    let height = calogo\n      .attr(\"viewBox\")\n      .split(' ')[3]\n\n    let rootNode;\n    let nodes = [];\n    let node = calogo.selectAll(\".node\");\n    let scaleFactor = 1;\n    let lettersPolygons = [];\n    let margin = {};\n\n    let config = [{\n      collisionMargin: .25,\n      amountNodes: 4000,\n      radiusRootNode: 6,\n      rootPosition: [201.0764923095703 + 3 + 0.002, 88.30018615722656 + 3 - 0.002],\n      margin: {\n        top: 0,\n        bottom: scaleFactor * height,\n        left: 0,\n        right: scaleFactor * width\n      }\n    }];\n\n    let configuration = config[0];\n\n    // A class for converting the poligons into an object suitable for the library svg-points.js\n    class polygonModel \n    {\n      constructor(type, attr, element) \n      {\n        this['type'] = type;\n        this[attr] = d3\n          .select(element)\n          .attr(attr);\n      }\n    }\n\n    // Convert all polygons in array of coordinates, thanks to svg-points.js\n    calogo\n      .selectAll('polygon')\n      .each(function() {\n        let thisPolygon = new polygonModel('polygon', 'points', this);\n        let thisPolygonPointsObjects = SVGPoints.toPoints(thisPolygon);\n        let thisPolygonPointsArray = [];\n        thisPolygonPointsObjects.forEach(function(d) {\n            thisPolygonPointsArray.push([d.x, d.y]);\n        });\n        lettersPolygons.push(thisPolygonPointsArray);\n      });\n\n    // This function checks whether the circle is or not whitin any of the letters polygon\n    function checkIfInside(coordinates) \n    {\n      let flag = 0;\n      lettersPolygons.forEach(function(d) {\n        if(d3.polygonContains(d, coordinates)) \n        {\n          flag++;\n        }\n      });\n      // if the flag is grater than one, the point is inside a letter eye\n      if(flag == 1) \n      {\n        return true;\n      } \n      else \n      {\n        return false;\n      }\n    }    \n\n    let collideForce = d3.forceCollide(function(d) { return d.r + configuration.collisionMargin });\n\n    function ticked() \n    {\n      node\n        .attr(\"cx\", function(d) { return d.x = Math.max(configuration.margin.left + d.r, Math.min(configuration.margin.right - d.r, d.x)); })\n        .attr(\"cy\", function(d) { return d.y = Math.max(configuration.margin.top + d.r, Math.min(configuration.margin.bottom - d.r, d.y)); })\n        .classed('is-inside', function(d) { return checkIfInside([d.x, d.y]) })\n    }\n\n    //Declare simulation\n    let simulation = d3\n      .forceSimulation(nodes)\n      .force(\"x\", null)\n      .force(\"y\", null)\n      .force(\"collide\", d3.forceCollide(function(d) { return d.r + configuration.collisionMargin }))\n      .alpha(1)\n      .alphaMin(.5)\n      .alphaDecay(0.01)\n      .on(\"tick\", ticked);\n\n    // Update function\n    function update() \n    {\n      function drawGraph() \n      {\n        // Apply the general update pattern to the nodes.\n        node = node.data(nodes, function(d) { return d.id; });\n\n        node.exit().remove();\n\n        node = node\n          .enter()\n          .append(\"circle\")\n          .classed('node', true)\n          .classed('is-inside', function(d) { return checkIfInside([d.x, d.y]) })\n          .classed('root-node', function(d) { if (d.id == 0) { return true } else { return false } })\n          .attr('cx', function(d) { return d.x; })\n          .attr('cy', function(d) { return d.y; })\n          .attr(\"r\", 0)\n          .merge(node);\n\n        node\n          .transition()\n          .delay(function(d, i) { return i+50; })\n          .duration(1500)\n          .ease(d3.easeElasticOut)\n          .attr('r', function(d) { return d.r; });\n\n        d3\n          .select('#logo-box h2')\n          .transition()\n          .delay(500)\n          .duration(1500)\n          .style('opacity', 1)\n          .style('letter-spacing', '.5px')\n\n      }\n\n      drawGraph();\n\n      // Update and restart the simulation.\n      simulation.nodes(nodes)\n          .alpha(1)\n          .restart();\n    }\n\n    // Anticollision on mouse move\n    calogo.on(\"mousemove\", function() {\n      let p1 = d3.mouse(this);\n\n      if(rootNode) \n      {\n        rootNode.fx = p1[0];\n        rootNode.fy = p1[1];\n        simulation\n          .alpha(1)\n          .restart(); //reheat the simulation\n      }\n    });\n\n    // Anticolllision on touch\n    calogo.on(\"touchmove\", function() {\n\n      let p1 = d3.touches(this)[0];\n      d3.event.preventDefault();\n\n      if(rootNode) \n      {\n        rootNode.fx = p1[0];\n        rootNode.fy = p1[1];\n        simulation\n          .alpha(1)\n          .restart(); //reheat the simulation\n      }\n    });\n\n    calogo.on(\"mouseleave\", function() {\n      \n      d3\n        .select('.root-node')\n        .transition()\n        .duration(0)\n        .on(\"end\", function() {\n          rootNode.fx = configuration.rootPosition[0];\n          rootNode.fy = configuration.rootPosition[1];\n        });\n    });\n\n    calogo.on(\"touchend\", function() {\n\n      d3\n        .select('.root-node')\n        .transition()\n        .duration(0)\n        .on(\"end\", function() {\n          rootNode.fx = configuration.rootPosition[0];\n          rootNode.fy = configuration.rootPosition[1];\n        });\n    });\n\n    d3.json('./assets/bubbles.json', function(err, data) {\n      nodes = data;\n\n      let maxRadius = d3.max(nodes, function(d) { return d.r })\n      rootNode = nodes.filter(function(d) {\n          return d.r == maxRadius;\n      })[0]\n\n      simulation\n        .nodes(nodes)\n        .force(\"x\", d3.forceX(function(d) { return d.x }))\n        .force(\"y\", d3.forceY(function(d) { return d.y }))\n\n      update();\n    });\n\n  }); // end of everything\n*/\n\nV.initialize = (el, data) => {\n//  svg = d3.select(el);\n//  width = svg.node().getBoundingClientRect().width - margin.left - margin.right;\n//  height = svg.node().getBoundingClientRect().height - margin.top - margin.bottom;\n}\n/*\nV.update\nV.destroy\n*/\n\nV.destroy = () => {};\n\nexport default V;","\nimport React from 'react';\nimport V from './logo.js';\nimport * as d3 from 'd3';\nimport AnimatedLogo from './AnimatedLogo';\n\nimport '../../App.css';\nimport './SplashScreen.css';\n\nexport default class SplashScreen extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n    this.loadData = this.loadData.bind(this);\n    this.state = {\n      data : \"data still not loaded\",\n      isLoading : true\n    };\n  }\n\n  loadData()\n  {\n    d3\n      .xml(\"./logo-big-polygons-01.svg\")\n      .then(xml => xml)\n      .then(data => {\n        this.setState({\n          data : data,\n          isLoading : false\n        });\n      })\n  }\n\n  componentDidMount()\n  {\n    this.loadData();\n  }\n\n  render()\n  {\n//    return <div>pippo</div>;\n\n/*\n    return (\n      <section className=\"container-fluid\">\n        <section id=\"interactive-logo\" className=\"container\">\n          <div className=\"row d-flex align-items-center\">\n            <AnimatedLogo />\n          </div>\n        </section>\n      </section>\n    );\n*/\n\nconsole.log(\"this.state.data.documentElement\", this.state.data.documentElement);\n//const s = new XMLSerializer().serializeToString(this.state.data.documentElement);\n//const s = this.state.data.documentElement.toString();\n//console.log(\"s : \", s);\n\n    return (\n      <section className=\"container-fluid\">\n        <section id=\"interactive-logo\" className=\"container\">\n          <div className=\"row d-flex align-items-center\">\n            <div id=\"logo-box\" className=\"col-12 col-sm-12 col-md-12 col-lg-10 mx-auto d-flex flex-column justify-content-center\" dangerouslySetInnerHTML={{__html: this.state.data.documentElement}} >\n            </div>\n          </div>\n        </section>\n      </section>\n    );\n\n  }\n}\n","\nimport React from 'react';\nimport V from './logo.js';\n\nexport default class AnimatedLogo extends React.Component\n{\n  componentDidMount()\n  {\nconsole.log(\"this : \", this);\n    this._chart = V.initialize(\n      this._rootNode,\n      this.props.data);\n  }\n\n  componentDidUpdate()\n  {\n  }\n  \n  componentWillUnmount()\n  {\n  }\n\n  _setRef(componentNode)\n  {\n    this._rootNode = componentNode;\n  }\n\n  render()\n  {\n    const style = {\n      width : \"100%\",\n      height : \"100%\"\n    };\n\n//    return <svg id={this.props.id} style={style} ref={this._setRef.bind(this)}></svg>\n\n    return (\n      <div id=\"logo-box\" className=\"col-12 col-sm-12 col-md-12 col-lg-10 mx-auto d-flex flex-column justify-content-center\">\n            </div>\n    );\n  }\n}","\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport '../../App.css';\n\n\nexport default class StaticSplashScreen extends React.Component\n{\n  render()\n  {\n    return (\n      <Link to=\"/AtlasIntro\"><img src={process.env.PUBLIC_URL + '/StaticLogo-01.svg'} /></Link>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport '../../App.css';\nimport './SkipIntroLink.css';\n\nexport default class SkipIntroLink extends React.Component\n{\n  render()\n  {\n    const route = \"/Home\";\n    return (\n      <div className=\"skip-intro-link\" style={this.props.style} >\n        <Link to={route}><h4>SKIP INTRO</h4></Link>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport SkipIntroLink from '../../general/SkipIntroLink/SkipIntroLink';\n\nimport '../../App.css';\nimport './AtlasIntroHeader.css';\n\nexport default class AtlasIntroHeader extends React.Component\n{\n  render()\n  {\n    return (\n      <div className=\"top-nav navigations\">\n        <div style={{gridColumn: 'span 22'}} />\n        <SkipIntroLink style={{gridColumn: 'span 2'}} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ParallaxScroll from 'react-scroll-transitions';\nimport { withRouter } from 'react-router-dom';\nimport AtlasIntroHeader from '../../headers/AtlasIntroHeader/AtlasIntroHeader';\n\nimport '../../App.css';\nimport './AtlasIntro.css';\nimport '../HamburgerMenu/HamburgerMenu.css';\n\nclass AtlasIntro extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.render_impl = this.render_impl.bind(this);\n\n    const headerHeight = window\n      .getComputedStyle(document.documentElement)\n      .getPropertyValue(\"--header-height\");\n\n    // remove the px postfix and parse the value of headerHeight\n    const headerHeight_n = Number.parseInt(headerHeight.substring(0, headerHeight.length - 2));\n\n    this.gridHeight = window.innerHeight - headerHeight_n;\n  }\n\n  getVisibleItemInitialY() { return 0; }\n  getDeltaY() { return this.gridHeight; }\n  getInvisibleItemInitialY() { return this.getVisibleItemInitialY() + this.getDeltaY(); }\n\n  phasesUp(id, transitionData)\n  {\n    return (\n      <div>\n        <AtlasIntroHeader />\n\n        <div id=\"scrollableGrid\" className=\"atlas-intro-scrollable\">\n          <div id=\"sidebar\" className=\"atlas-intro-sidebar\">\n\n            <div className=\"atlas-intro-sidebar-monoblock\" style={{ top: this.getVisibleItemInitialY() - transitionData.percent * this.getDeltaY() }}>\n              <h1>Itinerari</h1>\n              <br />\n              <br />\n              <p>Per entrare e muoversi dentro l’opera narrativa di Calvino abbiamo scelto tre itinerari.\n              Il primo riguarda il <strong>dubbio</strong>, il secondo lo <strong>spazio</strong> e il terzo la <strong>forma</strong> del racconto.\n              Sono tre scelte arbitrarie, ma che vanno a toccare alcuni fondamenti della scrittura calviniana,\n              invitandoci alla sua esplorazione.</p>\n            </div>\n\n            <div className=\"atlas-intro-sidebar-monoblock\" style={{ top: this.getVisibleItemInitialY() - transitionData.percent * this.getDeltaY()+3}}>\n              <h1>Tappe</h1>\n              <br />\n              <br />\n            <p>Ognuno dei tre itinerari si sviluppa in tre tappe. La prima tappa cerca di individuare il <strong>fenomeno</strong> di cui stiamo parlando.\n            La seconda tappa il <strong>processo</strong> che viene innescato da questo fenomeno. La terza tappa l’ombra del <strong>problema</strong> che sta dietro a tutto. </p>\n            </div>\n\n          </div>\n{/*\n          <div id=\"rows\" className=\"atlas-intro-row-grid\" style={{ top: this.getVisibleItemInitialY() - transitionData.percent * this.getDeltaY()}}>\n\n            <div /> // the empty page, before scrolling\n            <div /> // the first, empty row (it's the row of column headers)\n            <div className=\"atlas-intro-table-horizontal-row\">Fenomeno</div> // the first table row, and below the others\n            <div className=\"atlas-intro-table-horizontal-row\">Processo</div>\n            <div className=\"atlas-intro-table-horizontal-row\">Problema</div>\n\n          </div>\n*/}\n\n\n          <div id=\"rows\" className=\"atlas-intro-scrolling-cell-grid\" style={{ top: this.getVisibleItemInitialY() - transitionData.percent * this.getDeltaY() +20}}>\n\n            <div /><div /><div /><div /> {/* the empty page, before scrolling */}\n            <div /><div /><div /><div /> {/* the first, empty row (it's the row of column headers) */}\n            <div className=\"atlas-intro-cell2\"><h4>Fenomeno</h4></div>\n            <div className=\"atlas-intro-cell2\" />\n            <div className=\"atlas-intro-cell2\" />\n            <div className=\"atlas-intro-cell2\" /> {/* the first table row, and below the others */}\n            <div className=\"atlas-intro-cell2\"><h4>Processo</h4></div>\n            <div className=\"atlas-intro-cell2\" />\n            <div className=\"atlas-intro-cell2\" />\n            <div className=\"atlas-intro-cell2\" />\n            <div className=\"atlas-intro-cell2\"><h4>Problema</h4></div>\n            <div className=\"atlas-intro-cell2\" />\n            <div className=\"atlas-intro-cell2\" />\n            <div className=\"atlas-intro-cell2\" />\n\n          </div>\n\n        </div>\n\n        <div id=\"staticGrid\" className=\"atlas-intro\">\n          <div />\n          <div className=\"atlas-intro-cell-grid\">\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"><h3>Dubbio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Spazio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Forma</h3></div>\n\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"></div>\n\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n\n  compassIntroUp(id, transitionData)\n  {\n    return (\n      <div>\n        <AtlasIntroHeader />\n\n        <div id=\"scrollableGrid\" className=\"atlas-intro-scrollable\">\n          <div className=\"atlas-intro-sidebar2\" style={{ top: this.getVisibleItemInitialY() - transitionData.percent * this.getDeltaY() + 100 }}>\n\n            <div className=\"atlas-intro-sidebar-monoblock\" >\n              <h1>Tappe</h1>\n              <br />\n              <br />\n              <p>Ognuno dei tre itinerari si sviluppa in tre tappe.\n            <br />La prima tappa cerca di individuare il <strong>fenomeno</strong> di cui stiamo parlando.\n              La seconda tappa il <strong>processo</strong> che viene innescato da questo fenomeno.\n              La terza tappa l’ombra del <strong>problema</strong> che sta dietro a tutto. </p>\n            </div>\n\n            <div className=\"atlas-intro-sidebar-monoblock compass-selector-cell\" >\n            <h1>BUSSOLA</h1>\n            </div>\n\n            <div className=\"atlas-intro-sidebar-monoblock\" >\n              <p>Prima di iniziare il viaggio, ci vuole una <strong>bussola</strong>.\n              Per quello abbiamo creato tre visualizzazioni orientative,\n              che aiutino a muoversi dentro l’intero corpus dell’opera e che siano sempre a portata di mano.\n              Fornendo un colpo d’occhio sulla storia dei volumi, sulla vicenda dei racconti e sulla biblioteca mentale dell’autore. </p>\n            </div>\n\n          </div>\n        </div>\n{/*\n        <div id=\"staticGrid\" className=\"atlas-intro\">\n          <div/>\n          <div className=\"atlas-intro-cell-grid\">\n            <div className=\"atlas-intro-cell\"></div>\n            <div className=\"atlas-intro-cell\"><h3>Forma</h3></div>\n            <div className=\"atlas-intro-cell\"><h3>Dubbio</h3></div>\n            <div className=\"atlas-intro-cell\"><h3>Spazio</h3></div>\n          </div>\n        </div>\n*/}\n\n        <div id=\"staticGrid\" className=\"atlas-intro\">\n          <div/>\n          <div className=\"atlas-intro-cell-grid2\">\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"><h3>Dubbio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Spazio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Forma</h3></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Fenomeno</h4></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Processo</h4></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Problema</h4></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n\n          </div>\n        </div>\n\n{/*\n        <div className=\"hamburger-menu-cell-grid\">\n\n          <div className=\"hamburger-menu-cell\"></div>\n          <div className=\"hamburger-menu-cell\">Dubbio</div>\n          <div className=\"hamburger-menu-cell\">Spazi</div>\n          <div className=\"hamburger-menu-cell\">Forma</div>\n          <div className=\"hamburger-menu-cell\">Fenomeno</div>\n          <div className=\"hamburger-menu-cell\">Dubbio</div>\n          <div className=\"hamburger-menu-cell\">Spazio</div>\n          <div className=\"hamburger-menu-cell\">Forma</div>\n          <div className=\"hamburger-menu-cell\">Processo</div>\n          <div className=\"hamburger-menu-cell\">Dubitare</div>\n          <div className=\"hamburger-menu-cell\">Trasformare</div>\n          <div className=\"hamburger-menu-cell\">Combinare</div>\n          <div className=\"hamburger-menu-cell\">Problema</div>\n          <div className=\"hamburger-menu-cell\">Trama</div>\n          <div className=\"hamburger-menu-cell\">Realismo</div>\n          <div className=\"hamburger-menu-cell\">Cancellazione</div>\n\n        </div>\n*/}\n\n\n\n\n\n\n\n\n\n\n      </div>\n    );\n  }\n\n  navMenuUp(id, transitionData)\n  {\n    return (\n      <div>\n        <AtlasIntroHeader />\n\n        <div id=\"scrollableGrid\" className=\"atlas-intro-scrollable\">\n          <div className=\"atlas-intro-sidebar3\">\n\n            <div className=\"atlas-intro-sidebar-monoblock-2 compass-selector-cell\" style={{ top: this.getVisibleItemInitialY(), zIndex: 10 }}>\n            <h1>BUSSOLA</h1>\n            </div>\n\n{/*            <div className=\"atlas-intro-sidebar-monoblock\" style={{background:\"orange\", top: this.getVisibleItemInitialY() - 0.5 * transitionData.percent * this.getDeltaY(), zIndex: 1 }}> */}\n            <div className=\"atlas-intro-sidebar-monoblock\" style={{ top: 0 - transitionData.percent * 0.5 * this.getDeltaY(), zIndex: 1 }}>\n            <p>Prima di iniziare il viaggio, ci vuole una <strong>bussola</strong>.\n            Per quello abbiamo creato tre visualizzazioni orientative,\n            che aiutino a muoversi dentro l’intero corpus dell’opera e che siano sempre a portata di mano.\n            Fornendo un colpo d’occhio sulla storia dei volumi, sulla vicenda dei racconti e sulla biblioteca mentale dell’autore. </p>\n            </div>\n\n            <div className=\"atlas-intro-sidebar-monoblock\" style={{top: 0 - transitionData.percent * 0.5 * this.getDeltaY(), zIndex: 1 }}>\n            <h2>About</h2><br />\n              <h2>Strumenti</h2><br />\n              <h2>Rassegna</h2><br />\n              <h2>Articoli</h2><br />\n            </div>\n\n          </div>\n        </div>\n\n{/*\n        <div id=\"staticGrid\" className=\"atlas-intro\">\n          <div />\n          <div className=\"atlas-intro-cell-grid\">\n            <div className=\"atlas-intro-cell\"></div>\n            <div className=\"atlas-intro-cell\"><h3>Forma</h3></div>\n            <div className=\"atlas-intro-cell\"><h3>Dubbio</h3></div>\n            <div className=\"atlas-intro-cell\"><h3>Spazio</h3></div>\n          </div>\n        </div>\n*/}\n\n        <div id=\"staticGrid\" className=\"atlas-intro\">\n          <div/>\n          <div className=\"atlas-intro-cell-grid2\">\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"><h3>Dubbio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Spazio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Forma</h3></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Fenomeno</h4></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Processo</h4></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Problema</h4></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n            <div className=\"atlas-intro-cell2\"></div>\n\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n\n  makeCompassPermanent(id, transitionData)\n  {\n    return (\n      <div>\n        <AtlasIntroHeader />\n\n        <div id=\"scrollableGrid\" className=\"atlas-intro-scrollable\">\n          <div className=\"atlas-intro-sidebar4\" style={{ top: this.getVisibleItemInitialY() }}>\n\n            <div className=\"atlas-intro-sidebar-monoblock compass-selector-cell\" >\n              <h1>BUSSOLA</h1>\n            </div>\n\n            <div className=\"atlas-intro-sidebar-monoblock\">\n            <h2>About</h2><br />\n              <h2>Strumenti</h2><br />\n              <h2>Rassegna</h2><br />\n              <h2>Articoli</h2><br />\n            </div>\n\n          </div>\n        </div>\n{/*\n        <div id=\"staticGrid\" className=\"atlas-intro\">\n          <div />\n          <div className=\"atlas-intro-cell-grid\">\n            <div className=\"atlas-intro-cell\"></div>\n            <div className=\"atlas-intro-cell\"><h3>Forma</h3></div>\n            <div className=\"atlas-intro-cell\"><h3>Dubbio</h3></div>\n            <div className=\"atlas-intro-cell\"><h3>Spazio</h3></div>\n          </div>\n        </div>\n*/}\n\n        <div id=\"staticGrid\" className=\"atlas-intro\">\n          <div/>\n          <div className=\"atlas-intro-cell-grid2\">\n            <div className=\"atlas-intro-cell3\"></div>\n            <div className=\"atlas-intro-cell3\"><h3>Dubbio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Spazio</h3></div>\n            <div className=\"atlas-intro-cell3\"><h3>Forma</h3></div>\n\n            <div className=\"atlas-intro-cell2 pop\" ><h4>Fenomeno</h4></div>\n            <div className=\"atlas-intro-cell2\"><h5>Dubbio</h5></div>\n            <div className=\"atlas-intro-cell2\"><h5>Luoghi</h5></div>\n            <div className=\"atlas-intro-cell2\"><h5>Elenchi</h5></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Processo</h4></div>\n            <div className=\"atlas-intro-cell2\"><h5>Dubitare</h5></div>\n            <div className=\"atlas-intro-cell2\"><h5>Trasformare</h5></div>\n            <div className=\"atlas-intro-cell2\"><h5>Combinare</h5></div>\n\n            <div className=\"atlas-intro-cell2\"><h4>Problema</h4></div>\n            <div className=\"atlas-intro-cell2\"><h5>Cancellazione</h5></div>\n            <div className=\"atlas-intro-cell2\"><h5>Realismo</h5></div>\n            <div className=\"atlas-intro-cell2\"><h5>Trama</h5></div>\n\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n\n  render_impl(id, transitionData)\n  {\n    switch(id)\n    {\n      case \"phasesUp\"                     : return this.phasesUp(id, transitionData);\n      case \"compassIntroUp\"               : return this.compassIntroUp(id, transitionData);\n      case \"navMenuUp\"                    : return this.navMenuUp(id, transitionData);\n      case \"makeCompassPermanent\"         : return this.makeCompassPermanent(id, transitionData);\n      case \"makeCompassPermanentFinished\" : this.props.history.push('/Home'); return;\n    }\n  }\n\n  render()\n  {\n    return (\n      <div>\n        <ParallaxScroll\n          sections={[\n            { id : \"phasesUp\" },\n            { id : \"compassIntroUp\" },\n            { id : \"navMenuUp\" },\n            { id : \"makeCompassPermanent\" },\n            { id : \"makeCompassPermanentFinished\" }\n          ]}\n          render={this.render_impl}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(AtlasIntro);\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMinus } from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\n\nimport '../../App.css';\nimport './IntroLink.css';\n\nexport default class IntroLink extends React.Component\n{\n  render()\n  {\n    const route = \"/AtlasIntro\";\n    return (\n      <div className=\"intro-link\" style={this.props.style} >\n        <Link to={route}><h4>INTRO</h4></Link>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars } from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\nimport './MainMenu.css';\n\nclass MainMenu extends Component {\n  render() {\n    const route = \"/Home\";\n    return (\n      <div className=\"main-menu\" style={this.props.style}>\n        <Link to={route}>\n          <FontAwesomeIcon icon={faBars} />\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default MainMenu;\n\nMainMenu.defaultProps = { style: {gridColumn: 'span 1'}}\n","import React from 'react';\nimport IntroLink from '../../general/IntroLink/IntroLink';\nimport MainMenu from '../../general/MainMenu/MainMenu';\n\nimport '../../App.css';\n\nexport default class HamburgerIntroHeader extends React.Component\n{\n  render()\n  {\n    return (\n      <div className=\"top-nav navigations\">\n        <MainMenu style={{gridColumn: 'span 1'}} />\n        <div style={{gridColumn: 'span 21'}} />\n        <IntroLink style={{gridColumn: 'span 2'}} />\n      </div>\n    );\n  }\n}\n","\nimport React from 'react';\n\n\nimport './SlidingPanel.css';\nimport '../../views/Compass/Compass.css';\nimport { Link } from 'react-router-dom';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\n\nexport default class SlidingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n//    this.state = { open : JSON.parse(props.open) };\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount()\n  {\n    document.addEventListener(\"mousedown\", this.handleClick);\n  }\n\n  componentWillUnmount()\n  {\n    document.removeEventListener(\"mousedown\", this.handleClick);\n  }\n\n  setWrapperRef(node)\n  {\n    this.wrapperRef = node;\n  }\n\n  handleClick(event)\n  {\n    if(!this.wrapperRef) return;\n\n    if(this.wrapperRef.contains(event.target)) this.props.panelClicked(this.props.id);\n\n//    this.setState({ open : this.wrapperRef.contains(event.target) });\n\n//console.log(\"panel id : \", this.props.id);\n\n//    this.setState({ open : this.wrapperRef.contains(event.target) || this.props.getSelectedPanel() > Number.parseInt(this.props.id)});\n  }\n\n  render()\n  {\nconsole.log(\"render panel\");\n    \n    const interactiveViewLink = this.props.interactiveViewUrl ? <a className=\"button-text\" href={this.props.interactiveViewUrl} target=\"blank\">Esplora</a> : <></>;\n\n    return (\n      <div\n        className={\"sliding-panel \" + (this.props.open ? this.props.openClassName : this.props.closedClassName)}\n        ref={this.setWrapperRef}\n        style={{\n          zIndex : this.props.zIndex\n        }}>\n          <div className=\"rotated-title\"><h1>{this.props.title}</h1></div>\n        <div className=\"sliding-panel-main-text\">\n        <p><a href={this.props.pdfUrl} target=\"_blank\">PDF<FontAwesomeIcon icon={faLink}></FontAwesomeIcon></a>\n        </p>\n        <br />\n        <div><p>{this.props.text}</p>\n        <br /><br />{interactiveViewLink}</div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react'\nimport HamburgerIntroHeader from '../../headers/HamburgerIntroHeader/HamburgerIntroHeader';\nimport SlidingPanel from '../../general/SlidingPanel/SlidingPanel';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCoffee } from '@fortawesome/free-solid-svg-icons'\n\nimport './Compass.css';\n\nexport default class Compass extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = { selectedPanel : 1 };\n\n    this.getSelectedPanel = this.getSelectedPanel.bind(this);\n    this.setSelectedPanel = this.setSelectedPanel.bind(this);\n    this.panelClicked = this.panelClicked.bind(this);\n  }\n\n  componentDidUpdate()\n  {\n//    this.refs.fishbones.getDOMNode().focus();\n  }\n\n  getSelectedPanel()\n  {\n    return this.state.selectedPanel;\n  }\n\n  setSelectedPanel(selectedPanel)\n  {\n    this.state.selectedPanel = selectedPanel;\n  }\n\n  panelClicked(panelId)\n  {\n    this.setState({ selectedPanel : panelId });\nconsole.log(\"panelClicked : \", panelId);\n  }\n\n  render()\n  {\nconsole.log(\"render compass\");\n    return (\n      <div>\n        <HamburgerIntroHeader />\n\n          <div className=\"compass-main-description\">\n            <h1>Bussola</h1>\n            <div><p>Prima di iniziare il viaggio, ci vuole una bussola. Per quello abbiamo creato tre visualizzazioni orientative, che aiutino a muoversi dentro l’intero corpus dell’opera e che siano sempre a portata di mano.\n            Fornendo un colpo d’occhio sulla storia dei volumi, sulla vicenda dei racconti e sulla biblioteca mentale dell’autore.</p></div>\n          </div>\n          <div>\n            <SlidingPanel id=\"1\" open={this.state.selectedPanel >= 1} zIndex=\"1\" openClassName=\"panel1-open\" closedClassName=\"panel1-closed\" title=\"Lische\" getSelectedPanel={this.getSelectedPanel} setSelectedPanel={this.setSelectedPanel} panelClicked={this.panelClicked} interactiveViewUrl=\"http://atlantecalvino.unige.ch/lische/\" pdfUrl=\"http://atlantecalvino.unige.ch/assets/viz-02-flussi.zip\" text=\"I racconti sono la spina dorsale dell’opera di Calvino. Per questo abbiamo schierato gli oltre duecento titoli in un lungo elenco, che consente di ricostruire il flusso della storia editoriale dei racconti grazie a un’unica visualizzazione: dalla prima pubblicazione su giornali o riviste, fino alla raccolta nei volumi e alle varie ricomposizioni che questi ultimi subiscono nel corso del tempo.\" />\n            <SlidingPanel id=\"2\" open={this.state.selectedPanel >= 2} zIndex=\"2\" openClassName=\"panel2-open\" closedClassName=\"panel2-closed\" title=\"Sinuosa\" getSelectedPanel={this.getSelectedPanel} setSelectedPanel={this.setSelectedPanel} panelClicked={this.panelClicked} interactiveViewUrl=\"http://atlantecalvino.unige.ch/sinuosa/\" pdfUrl=\"http://atlantecalvino.unige.ch/assets/viz-01-sinuosa.zip\" text=\"Si tratta di una mappa sintetica, che segue l’andamento dei quattro decenni della carriera letteraria di Calvino, mostrando gli snodi più importanti della sua storia editoriale: i principali volumi e le collaborazioni giornalistiche. La divisione per generi permette di seguire le oscillazioni tra forma breve e lunga, le sperimentazioni sulla struttura, l’articolarsi inquieto dell’opera in cerca della sua giusta forma.\" />\n            <SlidingPanel id=\"3\" open={this.state.selectedPanel >= 3} zIndex=\"3\" openClassName=\"panel3-open\" closedClassName=\"panel3-closed\" title=\"Reti\" getSelectedPanel={this.getSelectedPanel} setSelectedPanel={this.setSelectedPanel} panelClicked={this.panelClicked} interactiveViewUrl=\"\" pdfUrl=\"http://atlantecalvino.unige.ch/assets/viz-03-arcipelago.zip\" text=\"I saggi non saranno oggetto della nostra analisi, che si limita all’opera narrativa. Ma stanno sullo sfondo, come un arcipelago di isole e isolotti che con questo strumento si può circumnavigare, per farsi un’idea di quale sia stata la biblioteca mentale di Calvino. Quasi duemila nomi, citati nel gran numero di saggi e articoli che lo scrittore ha pubblicato nell’arco di quarant’anni, vengono qui riuniti per consentirne un’esplorazione inedita. \" />\n          </div>\n{/*\n          <div>\n            <SlidingPanel open=\"true\">\n              Lische<br />\n              Zwei flinke Boxer jagen die quirlige Eva und ihren Mops durch Sylt. Franz jagt im komplett verwahrlosten Taxi quer durch Bayern. Zwölf Boxkämpfer jagen Viktor quer über den großen Sylter Deich. Vogel Quax zwickt Johnys Pferd Bim. Sylvia wagt quick den Jux bei Pforzheim. Polyfon zwitschernd aßen\n            </SlidingPanel>\n            <SlidingPanel open=\"false\">\n              Sinuosa<br />\n              Vogel Quax zwickt Johnys Pferd Bim. Sylvia wagt quick den Jux bei Pforzheim. Polyfon zwitschernd aßen Mäxchens Vögel Rüben, Joghurt und Quark. „Fix, Schwyz!“ quäkt Jürgen blöd vom Paß. Victor jagt zwölf Boxkämpfer quer über den großen Sylter Deich. Falsches Üben von Xylophonmusik quält jeden größeren Zwerg. Heizölrückstoßabdämpfung.Zwei flinke Boxer jagen die quirlige Eva und ihren Mops durch Sylt. Franz jagt im komplett verwahrlosten Taxi quer durch Bayern. Zwölf Boxkämpfer jagen Viktor quer über den großen Sylter Deich.\n            </SlidingPanel>\n            <SlidingPanel open=\"false\">\n              Reti<br />\n              Seit 1975 fehlen in den meisten Testtexten die Zahlen, weswegen nach TypoGb. 204 § ab dem Jahr 2034 Zahlen in 86 der Texte zur Pflicht werden. Nichteinhaltung wird mit bis zu 245 € oder 368 $ bestraft. Genauso wichtig in sind mittlerweile auch Âçcèñtë, die in neueren Schriften aber fast immer enthalten sind. Ein wichtiges aber schwierig zu integrierendes Feld sind OpenType-Funktionalitäten. Je nach Software und Voreinstellungen können eingebaute Kapitälchen, Kerning oder Ligaturen (sehr pfiffig) nicht richtig dargestellt werden.Dies ist ein Typoblindtext. An ihm kann man sehen, ob alle Buchstaben da sind und wie sie aussehen.\n            </SlidingPanel>\n          </div>\n*/}\n{/*\n          <div id=\"fishbones\" ref={ fishbones => this.fishbones = fishbones }>Lische</div>\n          <div id=\"winding\">Sinuosa</div>\n          <div id=\"networks\">Reti</div>\n*/}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCompass } from '@fortawesome/free-solid-svg-icons';\nimport { Link } from 'react-router-dom';\nimport '../../App.css';\nimport './CompassButton.css';\n\nexport default class CompassButton extends React.Component\n{\n  render()\n  {\n    const route = \"/Compass\";\n    return (\n      <div className=\"compass-button\" style={this.props.style}>\n        <Link to={route}>\n          <FontAwesomeIcon icon={faCompass} style={this.props.style} />\n        </Link>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport '../../App.css';\nimport CompassButton from '../../general/CompassButton/CompassButton';\nimport MainMenu from '../../general/MainMenu/MainMenu';\n\nexport default class HamburgerCompassHeader extends React.Component\n{\n  render()\n  {\n    return (\n      <div className=\"top-nav navigations\">\n        <MainMenu style={{ gridColumn : \"span 1\" }} />\n        <div style={{ gridColumn: \"span 22\" }} />\n        <CompassButton style={{ gridColumn : \"span 1\", color : \"white\", backgroundColor : \"black\" }} />\n      </div>\n    );\n  }\n}\n","\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default class LinkParagraph extends React.Component\n{\n  render()\n  {\n    return (\n      <nav>\n        <Link to={this.props.route}><h1>{this.props.linkText}< /h1></Link>\n        <p>\n          {this.props.description}\n        </p>\n      </nav>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default class ArrowButton extends React.Component {\n  render() {\n\n    let leftLine = <polygon points=\"84.7,9.8 4.2,9.8 9.6,4.8 8.4,3.5 0.7,10.7 8.4,17.8 9.6,16.6 4.3,11.6 84.7,11.6\"/>\n    let rightLine = <polygon points=\"0.7,11.6 81.2,11.6 75.8,16.6 77,17.8 84.7,10.7 77,3.5 75.8,4.8 81.2,9.8 0.7,9.8 \"/>\n\n    let line;\n\n    switch(this.props.arrowDirection) {\n      case \"left\":\n        line = leftLine;\n        break;\n      case \"right\":\n        line = rightLine;\n        break;\n      default: throw `direction ${this.props.arrowDirection} not recognized`;\n    }\n\n    return (\n      <div className=\"arrow-button\" style={this.props.style}>\n        <Link to={this.props.route}>\n          <div>\n            <div style={{width : \"87px\", textAlign : this.props.textAlign}}><strong>{this.props.text}</strong></div>\n            <svg width=\"120px\">\n              {line}\n            </svg>\n          </div>\n        </Link>\n      </div>\n    );\n  }\n}\n","import React from 'react'\n\nimport HamburgerCompassHeader from '../../headers/HamburgerCompassHeader/HamburgerCompassHeader';\nimport LinkParagraph from './LinkParagraph';\nimport ArrowButton from '../../general/ArrowButton/ArrowButton';\n\nimport './PhenomenaIntro.css';\nimport '../../App.css';\n\n\nexport default class PhenomenaIntro extends React.Component\n{\n  render()\n  {\n    return (\n      <>\n        <HamburgerCompassHeader />\n        <div className=\"phenomena-intro-grid\">\n          <div className=\"currentPhase\">\n            <div className=\"subheaders-container\">\n              <small className=\"current-phase-subheader\"><strong>FASE 1</strong></small>\n              <div className=\"other-phases-subheader\">\n                <ArrowButton arrowDirection=\"right\" textAlign=\"left\" text=\"FASE 2\" route=\"/Process/intro\" />\n                <ArrowButton arrowDirection=\"right\" textAlign=\"left\" text=\"FASE 3\" route=\"/Problem/intro\" />\n              </div>\n            </div>\n            <div className=\"col-md-12 col-lg-8\">\n              <h1>IL FENOMENO</h1>\n              <p>Per la prima tappa, quella dei fenomeni, abbiamo deciso di disegnare un territorio comune che i tre itinerari ci faranno esplorare.\n              <br /> Il territorio è formato ancora una volta dal corpus di tutte le opere di Calvino, che ci sforziamo di riunire in una forma visiva che possa aiutarci a meglio comprenderle.   </p>\n                <button type=\"button\" class=\"button-text\" target=\"blank\">Arcipelago</button></div>\n\n          </div>\n          <div className=\"itineraries-subgrid\">\n            <LinkParagraph route=\"/archipelago\" linkText=\"Nebbia\" description=\"All’inizio c’è la nebbia. Una fitta nebbia, dove il territorio si cancella e il suo significato ci sfugge. La nebbia è uno dei grandi fenomeni della scrittura calviniana, per questo abbiamo scelto di cominciare da qui.\" />\n            <LinkParagraph route=\"/\" linkText=\"Luoghi\" description=\"I luoghi sono l’appiglio, incerto ma fondamentale, per connettere il visibile all’invisibile. Il corporeo all’incorporeo. Niente meglio di un tentativo di vederli tutti insieme, ci farà entrare nel cuore di cosa significhi rappresentare il reale.\" />\n            <LinkParagraph route=\"/\" linkText=\"Elenchi\" description=\"Calvino è sempre stato un maniaco degli elenchi. L’elenco può funzionare come marca di realismo o all’opposto come fuga nell’astrazione. Fa vedere alcune cose, ma se aumenta il suo voltaggio, scivolando nel delirio elencatorio, non fa vedere più nulla.\" />\n          </div>\n        </div>\n      </>\n\n    );\n  }\n}\n","\nimport React from 'react';\n\nimport './CategoryEntryBlock.css';\n\nexport default class CategoryEntryBlock extends React.Component\n{\n  render()\n  {\n    return (\n      <div className=\"category-entry-block\">\n        <strong>{this.props.smallTitle}</strong>\n        <h2 className=\"title-category\">{this.props.title}</h2><br/>\n        <p>{this.props.description}</p>\n      </div>\n    );\n  }\n}\n","import React from 'react'\n\nimport CategoryEntryBlock from '../CategoryEntryBlock/CategoryEntryBlock';\nimport HamburgerCompassHeader from '../../headers/HamburgerCompassHeader/HamburgerCompassHeader';\nimport ArrowButton from '../../general/ArrowButton/ArrowButton';\n\nimport '../../App.css';\nimport './ProcessIntro.css';\n\nexport default class ProcessIntro extends React.Component\n{\n  render()\n  {\n    return (\n      <>\n        <HamburgerCompassHeader />\n        <div className=\"process\">\n        <div className=\"category-intro-grid\">\n          <div className=\"category-intro-block-row\">\n            <div className=\"category-intro-main-block\">\n              <small className=\"current-phase-subheader\"><strong>FASE 2</strong></small>\n              <h1>IL PROCESSO</h1>\n              <p>Con la seconda tappa, che riguarda i processi piuttosto che i fenomeni, ci spostiamo da oggetti di studio puntuali verso alcune azioni che cerchiamo di cogliere con tre verbi all’infinito. Dietro il fenomeno della nebbia andremo alla ricerca di come funziona il processo del dubitare, dietro lo spazio quello del trasformare e dietro gli elenchi quello del combinare.</p>\n            </div>\n            <div className=\"other-phases-subheader\" >\n              <ArrowButton arrowDirection=\"left\" textAlign=\"right\" text=\"FASE 1\" route=\"/Phenomena/intro\" />\n              <ArrowButton arrowDirection=\"right\" textAlign=\"left\" text=\"FASE 3\" route=\"/Problem/intro\" />\n            </div>\n          </div>\n          <div className=\"category-subentries-grid\">\n            <CategoryEntryBlock smallTitle=\"DUBBIO\" title=\"Dubitare\" description=\"Dubitare vuol dire creare un testo che si rifiuta di rimanere sempre se stesso. Significa invitare il lettore e la lettrice a entrare dentro una scrittura simile a un campo di mine, che può esplodere in ogni momento.\" />\n            <CategoryEntryBlock smallTitle=\"SPAZIO\" title=\"Trasformare\" description=\"Trasformare vuol dire affidarsi a uno dei processi fondamentali della scrittura di Calvino: quello della metamorfosi. Dietro tutti i luoghi visitati da Marco Polo, non si nasconde infatti sempre Venezia?\"/>\n            <CategoryEntryBlock smallTitle=\"FORMA\" title=\"Combinare\" description=\"Combinare vuole dire mettere in dubbio la linearità della narrazione. A tal punto da tendere il più delle volte a riscrivere una stessa trama elementare, basata sulla serie e sulla concatenazione. \"/>\n            </div>\n        </div>\n        </div>\n      </>\n    );\n  }\n}\n","import React from 'react'\n\nimport CategoryEntryBlock from '../CategoryEntryBlock/CategoryEntryBlock';\nimport HamburgerCompassHeader from '../../headers/HamburgerCompassHeader/HamburgerCompassHeader';\nimport ArrowButton from '../../general/ArrowButton/ArrowButton';\n\nimport '../../App.css';\nimport './ProblemIntro.css';\n\nexport default class ProblemIntro extends React.Component\n{\n  render()\n  {\n    return (\n      <>\n        <HamburgerCompassHeader />\n        <div className=\"problem\">\n        <div className=\"category-intro-grid\">\n          <div className=\"category-intro-block-row\">\n            <div className=\"category-intro-main-block\">\n              <small className=\"current-phase-subheader\"><strong>FASE 3</strong></small>\n              <h1>IL PROBLEMA</h1>\n              <p>Nella terza tappa cercheremo di inseguire l’ombra dei problemi dietro ai fenomeni e ai processi. Il timore della cancellazione, che nasconde a sua volta quello della cecità e della illeggibilità del testo. Il grande totem del realismo. E infine la tormentosa questione di come si costruisce una trama.\n              </p>\n            </div>\n            <div className=\"other-phases-subheader\" >\n              <ArrowButton arrowDirection=\"left\" textAlign=\"right\" text=\"FASE 1\" route=\"/Phenomena/intro\" />\n              <ArrowButton arrowDirection=\"left\" textAlign=\"left\" text=\"FASE 2\" route=\"/Process/intro\" />\n            </div>\n          </div>\n          <div className=\"category-subentries-grid\">\n            <CategoryEntryBlock smallTitle=\"DUBBIO\" title=\"Cancellazione\" description=\"Scrivere è un modo per opporsi al vuoto della pagina. Ma anche per accogliere quel vuoto dentro la scrittura, che in Calvino combatte sempre ad armi impari contro la tendenza alla cancellazione del testo e alla scomparsa del suo significato. \"/>\n            <CategoryEntryBlock smallTitle=\"SPAZIO\" title=\"Realismo\" description=\"Dopo aver attraversato gli spazi dell’opera di Calvino, il problema della rappresentazione della realtà resta intatto: dopo le infinite metamorfosi alle quali abbiamo assistito, come riconoscere il vero dal falso? \"/>\n            <CategoryEntryBlock smallTitle=\"FORMA\" title=\"Trama\" description=\"Senza trame non ci sono narrazioni. Ma le narrazioni possono avere rapporti molto complicati con le trame. Come l’opera di Calvino dimostra in modo esemplare.\"/>\n            </div>\n        </div>\n        </div>\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport '../../App.css';\nimport './NavMenu.css'\n\nexport default class NavMenu extends React.Component\n{\n  render()\n  {\n    let children = React.Children.toArray(this.props.children)\n    let the_link = <Link to={this.props.route}>{this.props.text}</Link>\n\n    if (children.length < 1) {\n      let obj = { type: 'span'}\n      children.push(obj)\n    }\n\n    return (\n      <div className={this.props.className}>\n        {\n          children.map((d,i)=>{\n            console.log(d);\n            let this_class = \"\"\n            if (d.props && d.props.dataClass) {\n              this_class = d.props.dataClass\n            }\n            return <d.type key={i} className={this_class}>{the_link}</d.type>\n          })\n        }\n      </div>\n    );\n  }\n\n}\n\n  // import React from 'react';\n  // import { Link } from 'react-router-dom';\n  //\n  // import '../../App.css';\n  // import './NavMenu.css'\n  //\n  // export default class NavMenu extends React.Component\n  // {\n  //   render()\n  //   {\n  //     return (\n  //       <div className=\"nav-menu-cell-grid\" >\n  //         <div className=\"nav-menu-cell\"><Link to=\"/About\"><h2>About</h2></Link></div>\n  //         <div className=\"nav-menu-cell\"><Link to=\"/Tools\"><h2>Strumenti</h2></Link></div>\n  //         <div className=\"nav-menu-cell\"><Link to=\"/News\"><h2>Rassegna</h2></Link></div>\n  //         <div className=\"nav-menu-cell\"><Link to=\"/Papers\"><h2>Articoli</h2></Link></div>\n  //       </div>\n  //     );\n  //   }\n  // }\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { HashLink } from 'react-router-hash-link';\n\nexport default class ViewSelector extends React.Component\n{\n  render()\n  {\n    let children = React.Children.toArray(this.props.children)\n    let the_link = this.props.route.includes(\"#\") ? <HashLink to={this.props.route}>{this.props.text}</HashLink> : <Link to={this.props.route}>{this.props.text}</Link>\n\n    if (children.length < 1) {\n      let obj = { type: 'span'}\n      children.push(obj)\n    }\n\n    return (\n      <div className={this.props.className}>\n        {\n          children.map((d,i)=>{\n            // console.log(d);\n            let this_class = \"\"\n            if (d.props && d.props.dataClass) {\n              this_class = d.props.dataClass\n            }\n            return <d.type key={i} className={this_class}>{the_link}</d.type>\n          })\n        }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMinus } from '@fortawesome/free-solid-svg-icons';\nimport { useLastLocation } from 'react-router-last-location';\nimport { Link, useHistory } from 'react-router-dom';\nimport '../../App.css';\nimport './BackFromMainMenu.css';\n\nconst BackFromMainMenu = (props) =>\n{\n  const history = useHistory();\n  console.log(\"history : \", history);\n\n  return (\n    <div className=\"back-from-main-menu\" style={props.style} onClick={() => history.goBack()}>\n        <FontAwesomeIcon icon={faMinus} />\n    </div>\n  );\n}\n\nexport default BackFromMainMenu;\n","import React from 'react';\nimport BackFromMainMenu from '../general/BackFromMainMenu/BackFromMainMenu';\nimport IntroLink from '../general/IntroLink/IntroLink';\n\nimport '../App.css';\n\nexport default class HamburgerMenuHeader extends React.Component\n{\n  render()\n  {\n    return (\n      <div className=\"top-nav navigations\">\n        <BackFromMainMenu style={{gridColumn: 'span 1'}} />\n        <div style={{gridColumn: 'span 21'}} />\n        <IntroLink style={{gridColumn: 'span 2'}} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport NavMenu from '../NavMenu/NavMenu';\nimport ViewSelector from '../ViewSelector/ViewSelector';\nimport HamburgerMenuHeader from '../../headers/HamburgerMenuHeader';\nimport { Link } from 'react-router-dom';\n\nimport '../../App.css';\nimport './HamburgerMenu.css';\nimport '../NavMenu/NavMenu.css';\n\nexport default class HamburgerMenu extends React.Component\n{\n  render()\n  {\n    return (\n      <div className=\"hamburger-menu-container\">\n        <HamburgerMenuHeader />\n        <div className=\"hamburger-menu\">\n          <div className=\"hamburger-menu-sidebar\">\n            <ViewSelector className=\"compass-selector-cell\" route=\"Compass\" text=\"BUSSOLA\"><h1 dataClass=\"\"/></ViewSelector>\n\n            <div className=\"nav-menu-cell-grid tint\" >\n              <div className=\"nav-menu-cell\"><Link to=\"/About\"><h2>About</h2></Link></div>\n              <div className=\"nav-menu-cell\"><Link to=\"/Tools\"><h2>Strumenti</h2></Link></div>\n              <div className=\"nav-menu-cell\"><Link to=\"/News\"><h2>Rassegna</h2></Link></div>\n              <div className=\"nav-menu-cell\"><Link to=\"/Papers\"><h2>Articoli</h2></Link></div>\n            </div>\n\n            </div>\n\n          <div className=\"hamburger-menu-cell-grid\">\n\n            <div className=\"hamburger-menu-cell\" />\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Itineraries/#doubt\" text=\"Dubbio\"><h3 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Itineraries/#spaces\" text=\"Spazi\"><h3 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Itineraries/#shape\" text=\"Forma\"><h3 dataClass=\"\"/></ViewSelector>\n\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Phenomena/intro\" text=\"Fenomeno\"><h4 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Phenomena/doubtAnalysis\" text=\"Dubbio\"><h5 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Phenomena/spaceAnalysis\" text=\"Spazio\"><h5 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Phenomena/shapeAnalysis\" text=\"Forma\"><h5 dataClass=\"\"/></ViewSelector>\n\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Process/intro\" text=\"Processo\"><h4 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Process/doubting\" text=\"Dubitare\"><h5 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Process/transforming\" text=\"Trasformare\"><h5 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Process/combining\" text=\"Combinare\"><h5 dataClass=\"\"/></ViewSelector>\n\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Problem/intro\" text=\"Problema\"><h4 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Problem/cancellation\" text=\"Cancellazione\"><h5 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Problem/realism\" text=\"Realismo\"><h5 dataClass=\"\"/></ViewSelector>\n            <ViewSelector className=\"hamburger-menu-cell\" route=\"Problem/plot\" text=\"Trama\"><h5 dataClass=\"\"/></ViewSelector>\n\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","const GlobalData = {\n  allVolumes: [\n    {\"id\":\"V001\",\"label\":\"Il sentiero dei nidi di ragno\"},\n    {\"id\":\"V002\",\"label\":\"Ultimo viene il corvo\"},\n    {\"id\":\"V003\",\"label\":\"Il visconte dimezzato\"},\n    {\"id\":\"V004\",\"label\":\"L'entrata in guerra\"},\n    {\"id\":\"V005\",\"label\":\"Il barone rampante\"},\n    {\"id\":\"V006\",\"label\":\"I racconti\"},\n    {\"id\":\"V007\",\"label\":\"La formica argentina\"},\n    {\"id\":\"V008\",\"label\":\"Il cavaliere inesistente\"},\n    {\"id\":\"V009\",\"label\":\"La giornata di uno scrutatore\"},\n    {\"id\":\"V010\",\"label\":\"La speculazione edilizia\"},\n    {\"id\":\"V011\",\"label\":\"Marcovaldo\"},\n    {\"id\":\"V012\",\"label\":\"La nuvola di smog e La formica argentina\"},\n    {\"id\":\"V013\",\"label\":\"Le cosmicomiche\"},\n    {\"id\":\"V014\",\"label\":\"Ti con Zero\"},\n    {\"id\":\"V015\",\"label\":\"La memoria del mondo\"},\n    {\"id\":\"V016\",\"label\":\"Il castello dei destini incrociati\"},\n    {\"id\":\"V017\",\"label\":\"Gli amori difficili\"},\n    {\"id\":\"V018\",\"label\":\"Le città invisibili\"},\n    {\"id\":\"V019\",\"label\":\"Il castello dei destini incrociati (riediz)\"},\n    {\"id\":\"V020\",\"label\":\"Eremita a Parigi\"},\n    {\"id\":\"V021\",\"label\":\"Se una notte d'inverno un viaggiatore\"},\n    {\"id\":\"V022\",\"label\":\"Palomar\"},\n    {\"id\":\"V023\",\"label\":\"Le cosmicomiche vecchie e nuove\"}\n  ]\n}\n\nexport default GlobalData\n","import React, { Component } from 'react';\nimport '../../App.css';\n\nclass PageTitle extends Component {\n  render() {\n    return <div className=\"page-title\" style={this.props.style}>{this.props.title}</div>;\n  }\n}\n\nexport default PageTitle;\n\nPageTitle.defaultProps = {\n  title: 'This page needs a title',\n  style: {gridColumn: 'span 12'}\n};\n","import React, { Component } from 'react';\nimport '../../App.css';\nimport './MoreInfo.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQuestionCircle } from '@fortawesome/free-regular-svg-icons';\n\nclass MoreInfo extends Component {\n  render() {\n    return <div style={this.props.style} className=\"more-info\"><FontAwesomeIcon icon={faQuestionCircle} /></div>;\n  }\n}\n\nexport default MoreInfo;\n","import React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCompass } from '@fortawesome/free-regular-svg-icons';\nimport '../../App.css';\n\nclass Bussola extends Component {\n  render() {\n    return <div style={this.props.style} className=\"more-info\"><FontAwesomeIcon icon={faCompass} /></div>;\n  }\n}\n\nexport default Bussola;\n","import React, { Component } from 'react';\n\nclass Loading extends Component {\n  render() {\n    return <div style={this.props.style}>Loading...</div>;\n  }\n}\n\nexport default Loading;\n","import React, { Component } from 'react';\nimport '../../App.css';\nimport './Options.css'\n\nimport Dropdown from 'react-bootstrap/Dropdown'\n\nclass Options extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      show:undefined,\n      selection: (this.props.data.multiple===false) ? this.props.data.options.filter(d=>d.status)[0].label : undefined\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.toggleDropDown = this.toggleDropDown.bind(this);\n  }\n\n  componentDidMount() {\n    // console.log('Mounted',this.props.title, this.props.data);\n  }\n\n  componentDidUpdate() {\n    // console.log('Update',this.props.title)\n    if (this.props.data.reset) {\n      let newOptions = this.props.data.options.slice(0)\n      newOptions.forEach(d=>d.status=false)\n      if (this.props.changeOptions){\n        this.props.changeOptions(newOptions)\n      } else {\n        console.log('No function')\n      }\n    }\n  }\n\n  handleChange(event,ee) {\n    const name = event.target.getAttribute('name');\n\n    // A convenient way to clone an array, since it is a bad thing to directly modify the props\n    let newOptions = this.props.data.options.slice(0)\n\n    if (!this.props.data.multiple) {\n      newOptions.forEach(d=>d.status=false)\n      this.setState({\n        selection:name\n      })\n    }\n\n    // If \"all\" is selected, invert the selection, then return\n    if (name===\"all\"){\n      newOptions.forEach(d=>d.status=!d.status);\n    } else {\n      const selected_item = newOptions.filter(d=>d.label===name)\n      if (selected_item.length>0) {\n        selected_item[0].status = !selected_item[0].status\n      }\n    }\n\n    if (this.props.changeOptions){\n      this.props.changeOptions(newOptions)\n    } else {\n      console.log('No function')\n    }\n\n  }\n\n  toggleDropDown(isOpen,event,metadata) {\n    if (metadata.source===\"select\"&&this.props.data.multiple){\n      this.setState({\n        show: true\n      })\n    } else {\n      this.setState({\n        show: undefined\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"options-container\" style={this.props.style}>\n\n        <Dropdown onToggle={this.toggleDropDown} show={this.state.show}>\n          <Dropdown.Toggle>\n            { !this.props.data.multiple && (\n                <div>\n                  <span className=\"micro-title\">{this.props.title}</span>\n                  <span className=\"current-selection\">{this.state.selection}</span>\n                </div>\n              )\n            }\n            { this.props.data.multiple && this.props.title }\n          </Dropdown.Toggle>\n          <Dropdown.Menu onToggle={this.toggleDropDown} show={this.state.show}>\n            {\n              this.props.data.options.map( (d,i) => {\n                return (\n                  <Dropdown.Item key={i} name={d.label} onClick={this.handleChange} className={{'active':d.status}}>\n                    {d.label}\n                  </Dropdown.Item>\n                )\n              })\n            }\n            { this.props.data.multiple && (\n              <Dropdown.Item key={5} name=\"all\" onClick={this.handleChange} className={{'active':false}}>\n                Inverti Selezione\n              </Dropdown.Item>\n            ) }\n          </Dropdown.Menu>\n        </Dropdown>\n\n      </div>\n    )\n  }\n}\n\nexport default Options;\n\nOptions.defaultProps = {\n  style: {\n    gridColumn: 'span 4'\n  },\n  data: {\n    options: [],\n    multiple: false\n  },\n  title: 'Options',\n\n}\n","import React, { Component } from 'react';\nimport '../../App.css';\nimport './Search.css';\nimport {Typeahead} from 'react-bootstrap-typeahead';\nimport 'react-bootstrap-typeahead/css/Typeahead.css';\nimport 'react-bootstrap-typeahead/css/Typeahead-bs4.css';\n\nclass Search extends Component {\n  render() {\n    let isSelection = false;\n    return <div className=\"search-component\" style={this.props.style}>\n      { !isSelection && <span style={\n          {fontSize: '1rem',\n          position: 'relative',\n          top: '-3px'}\n      }>/</span>}\n      <Typeahead\n        multiple\n        onChange={(selected) => {\n          this.props.changeOptions(selected)\n        }}\n        options={this.props.data.options}\n        id=\"main-search\"\n      />\n\n    </div>;\n  }\n}\n\nexport default Search;\n\nSearch.defaultProps = {\n  style: {\n    gridColumn: 'span 4'\n  }\n}\n","import * as d3 from 'd3';\n\nlet svg, context, gBrush, info, width, height, margin = {},\n\tfuncChangeSpan;\n\nconst Viz = {};\n\nViz.initialize = (el, data, changeSpan) => {\n\t// console.log('initialized')\n\n\t// data must be an array with 2+ elements. Element is a Date object\n\n\t// Important to declare at beginning\n\tfuncChangeSpan = changeSpan;\n\n\t// console.log(el.getBoundingClientRect().width)\n\t//\n\n\tsvg = d3.select(el).select('svg')\n\n\tfunction convertRemToPixels(rem) {\n\t\treturn rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\n\t}\n\n\t//1.2857142857rem\n\n\tconst m = 10;\n\tmargin.top = m\n\tmargin.right = m\n\tmargin.bottom = svg.node().getBoundingClientRect().height - convertRemToPixels(1.2857142857) - margin.top\n\tmargin.bottom = margin.top\n\tmargin.left = m\n\n\twidth = svg.node().getBoundingClientRect().width - margin.left - margin.right;\n\theight = svg.node().getBoundingClientRect().height - margin.top - margin.bottom;\n\n\tViz.x = d3.scaleTime()\n\t\t.range([0, width])\n\t\t.domain(d3.extent(data, d => d));\n\n\tViz.brush = d3.brushX()\n\t\t.extent([\n\t\t\t[0, 0],\n\t\t\t[width, height]\n\t\t])\n\t\t.handleSize(m)\n\t\t.on(\"brush end\", brushed)\n\n  gBrush = svg.append(\"g\")\n\t\t.attr(\"class\", \"brush\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n\tcontext = svg.append(\"g\")\n\t\t.attr(\"class\", \"context\")\n\t\t.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n    .style(\"pointer-events\", \"none\")\n\n\tcontext.append('rect')\n\t\t.classed(\"context-window\", true)\n\t\t.attr(\"width\", width)\n\t\t.attr(\"height\", height)\n\n  // important before brushed is called or assigned\n  info = context.append('g').selectAll('.info')\n\n\n\tgBrush.call(Viz.brush)\n\t\t.call(Viz.brush.move, Viz.x.range())\n\n}\n\nViz.update = (span) => {\n\t// console.log('updated')\n\n\tinfo = info.data(span, d => d);\n\tinfo.exit().remove()\n\tinfo = info.enter().append('text')\n\t\t.attr('class', 'info')\n\t\t.attr('x', d => { return Viz.x(d) })\n\t\t.attr('y', height-1.9) // this value depends on the font-size\n\t\t.attr('text-anchor', (d, i) => {\n\t\t\tfunction getAnchor(d, scale, width) {\n\t\t\t\tlet anchor;\n\t\t\t\tif(i % 2 === 0) {\n\t\t\t\t\tif(scale(d) >= width / 4) {\n\t\t\t\t\t\tanchor = 'end';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tanchor = 'start';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(scale(d) <= width / 4 * 3) {\n\t\t\t\t\t\tanchor = 'start';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tanchor = 'end';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn anchor;\n\t\t\t}\n\t\t\treturn getAnchor(d, Viz.x, width);\n\t\t})\n\t\t.text(d => {\n\t\t\treturn d.getFullYear()\n\t\t})\n\t\t.merge(info)\n\n}\n\nViz.destroy = (el) => {}\n\nexport default Viz\n\nfunction brushed() {\n\tif(d3.event.sourceEvent && d3.event.sourceEvent.type === \"zoom\") return; // ignore brush-by-zoom\n\tif(d3.event.selection) {\n\t\tvar span = d3.event.selection || Viz.x.range();\n\t\tspan = span.map(d => { return Viz.x.invert(d) })\n\t\tif(d3.event.type === \"end\") {\n\t\t\t// console.log('filtered by time')\n\t\t\tfuncChangeSpan(span);\n\t\t}\n\t\tspan = span.map(d => new Date(d));\n\t\tViz.update(span);\n\t}\n}\n","import * as d3 from 'd3';\nimport ParseMatrixData from '../../utilities/parse-matrix-data';\n// import _ from 'lodash';\n\nconst categories = ['generico_cosmico', 'nominato_cosmico', 'nominato_terrestre', 'generico_terrestre', 'inventato', 'no_ambientazione'];\nconst categoriesColors = ['#3131ff', '#bbbbff', '#ffce00', '#ff6c39', '#00c19c', '#cecece']\n\nconst collisionPadding = 0.25;\n\n// data\nlet originalData, graph, nodes = [],\n\tlinks = [],\n\thullsData = [],\n\tlast = 0,\n\tglobalTimeFilter;\n\n// Dimensions and scales\nlet x, y, r, color, margin = { 'top': 0, 'right': 50, 'bottom': 30, 'left': 50 },\n\toriginalLabelsSize,\n\twidth, height;\nlet xAxisCall, yAxisCall;\n\n// elements\nlet svg, g, g_forceLayout, xAxis, yAxis, hull, link, node, presumed, label, information\n\n// force-layout\nlet simulation\n\nconst V = {}\n\nexport default V\n\nV.initialize = (el, data, _originalData, _onChangeCategorie, _resetFilter) => {\n\t// console.log('init');\n\t// console.log('data:', data);\n\t// console.log('filters:', filters);\n\n\toriginalData = _originalData;\n\n\t// Root element and dimensions\n\tsvg = d3.select(el).style('touch-action', 'manipulation');\n\twidth = svg.node().getBoundingClientRect().width - margin.left - margin.right;\n\theight = svg.node().getBoundingClientRect().height - margin.top - margin.bottom;\n\n\tsvg.append('rect')\n\t\t.attr('width', width + margin.left + margin.right)\n\t\t.attr('height', height + margin.top + margin.bottom)\n\t\t.classed('reset-rect', true)\n\t\t.on('click', d => {\n\t\t\tif((d3.event.timeStamp - last) < 500) {\n\t\t\t\tconsole.log('reset')\n\t\t\t\treset('also categories');\n\t\t\t\t_resetFilter();\n\t\t\t}\n\t\t\tlast = d3.event.timeStamp;\n\t\t})\n\n\t// Scales\n\tx = d3.scaleTime()\n\t\t.range([0, width])\n\t\t.domain(d3.extent(data.nodes, d => d.year));\n\n\txAxisCall = d3.axisBottom(x).ticks(d3.timeYear.every(1));\n\n\ty = d3.scalePoint()\n\t\t.range([0, height])\n\t\t.domain(categories)\n\t\t.padding(0.5);\n\n\tyAxisCall = d3.axisRight(y)\n\t\t.tickSize(width)\n\t\t.tickFormat(d => {\n\t\t\treturn d.replace(/_/g, ' ')\n\t\t});\n\n\tr = d3.scalePow().exponent(0.5)\n\t\t.range([3, 25])\n\t\t.domain([1, d3.max(data.nodes, function(d) { return d.totalSubNodes })]);\n\n\tcolor = d3.scaleOrdinal().domain(categories).range(categoriesColors);\n\n\t// Groups and scales\n\tg = svg.append('g').attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\txAxis = g.append(\"g\").attr(\"class\", \"x-axis\");\n\tyAxis = g.append('g').attr(\"class\", \"y-axis\");\n\tg_forceLayout = g.append('g');\n\n\txAxis.attr(\"transform\", `translate(${0}, ${height})`).call(xAxisCall);\n\n\tyAxis.attr(\"transform\", `translate(0, 0)`)\n\t\t.call(yAxisCall)\n\t\t.call(g => g.selectAll(\".tick text\")\n\t\t\t.style(\"text-transform\", \"capitalize\"))\n\t\t.call(g => g.select(\".domain\")\n\t\t\t.remove())\n\t\t.call(g => g.selectAll(\".tick line\")\n\t\t\t.attr(\"stroke-opacity\", 0.5)\n\t\t\t.attr(\"stroke-dasharray\", \"2,2\"))\n\t\t.call(g => g.selectAll(\".tick text\")\n\t\t\t.attr(\"x\", 4)\n\t\t\t.attr(\"dy\", -y.step() / 10));\n\n\tyAxis.selectAll('.tick')\n\t\t.on('click', function(d) {\n\n\t\t\tlet selectedCategory;\n\n\t\t\tif(d3.select(this).classed('cat-selected') === false) {\n\t\t\t\tselectedCategory = d;\n\t\t\t\tif(d3.selectAll('.tick.cat-selected').size() > 0) {\n\t\t\t\t\tnodes.filter(nnn => nnn.part_of === '').forEach(n => { closeSubnodes(n, false) });\n\t\t\t\t\td3.selectAll('.tick')\n\t\t\t\t\t\t.classed('cat-selected', false)\n\t\t\t\t\t\t.select('rect')\n\t\t\t\t\t\t.attr('fill', 'transparent')\n\t\t\t\t}\n\n\t\t\t\tlet toOpen = []\n\t\t\t\tnodes.forEach(n0 => {\n\t\t\t\t\t// console.log('n0',n0);\n\t\t\t\t\tif(n0.totalSubNodes > 0) {\n\t\t\t\t\t\tif(n0.subNodes.map(n => n.category).indexOf(d) > -1) {\n\t\t\t\t\t\t\ttoOpen.push(n0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn0.subNodes.forEach(n1 => {\n\t\t\t\t\t\t\t// console.log('n1',n1);\n\t\t\t\t\t\t\tif(n1.totalSubNodes > 0) {\n\t\t\t\t\t\t\t\tif(n1.subNodes.map(n => n.category).indexOf(d) > -1) {\n\t\t\t\t\t\t\t\t\ttoOpen.push(n0);\n\t\t\t\t\t\t\t\t\ttoOpen.push(n1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tn1.subNodes.forEach(n2 => {\n\t\t\t\t\t\t\t\t\t// console.log('n2',n2);\n\t\t\t\t\t\t\t\t\tif(n2.totalSubNodes > 0) {\n\t\t\t\t\t\t\t\t\t\tif(n2.subNodes.map(n => n.category).indexOf(d) > -1) {\n\t\t\t\t\t\t\t\t\t\t\ttoOpen.push(n0);\n\t\t\t\t\t\t\t\t\t\t\ttoOpen.push(n1);\n\t\t\t\t\t\t\t\t\t\t\ttoOpen.push(n2);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\ttoOpen.forEach(n => { openSubnodes(n, false) });\n\n\t\t\t\td3.select(this).select('rect').attr('fill', d => color(d))\n\t\t\t} else {\n\t\t\t\tselectedCategory = null;\n\t\t\t\tlet toClose = []\n\t\t\t\tnodes.forEach(n0 => {\n\t\t\t\t\t// console.log('n0',n0);\n\t\t\t\t\tif(n0.totalSubNodes > 0) {\n\t\t\t\t\t\tif(n0.subNodes.map(n => n.category).indexOf(d) > -1) {\n\t\t\t\t\t\t\ttoClose.push(n0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tn0.subNodes.forEach(n1 => {\n\t\t\t\t\t\t\t// console.log('n1',n1);\n\t\t\t\t\t\t\tif(n1.totalSubNodes > 0) {\n\t\t\t\t\t\t\t\tif(n1.subNodes.map(n => n.category).indexOf(d) > -1) {\n\t\t\t\t\t\t\t\t\ttoClose.push(n0);\n\t\t\t\t\t\t\t\t\ttoClose.push(n1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tn1.subNodes.forEach(n2 => {\n\t\t\t\t\t\t\t\t\t// console.log('n2',n2);\n\t\t\t\t\t\t\t\t\tif(n2.totalSubNodes > 0) {\n\t\t\t\t\t\t\t\t\t\tif(n2.subNodes.map(n => n.category).indexOf(d) > -1) {\n\t\t\t\t\t\t\t\t\t\t\ttoClose.push(n0);\n\t\t\t\t\t\t\t\t\t\t\ttoClose.push(n1);\n\t\t\t\t\t\t\t\t\t\t\ttoClose.push(n2);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\ttoClose.forEach(n => { closeSubnodes(n, false) });\n\t\t\t\td3.select(this).select('rect').attr('fill', 'transparent')\n\t\t\t}\n\n\t\t\tV.update();\n\n\t\t\t// if(d3.select(this).classed('cat-selected') === false) {\n\t\t\t// \tnode.filter(nn => { return nn.category === d }).each(nn => selectNode(nn))\n\t\t\t// } else {\n\t\t\t// \tnode.each(nn => unselectNode(nn))\n\t\t\t// }\n\n\t\t\t// Now that everything is done, assign the class\n\t\t\td3.select(this).classed('cat-selected', !d3.select(this).classed('cat-selected'))\n\n\t\t\t_onChangeCategorie(selectedCategory);\n\t\t})\n\t\t.append('rect')\n\t\t.attr('width', '14px')\n\t\t.attr('height', '14px')\n\t\t.attr('x', -14)\n\t\t.attr('y', -22)\n\t\t.attr('rx', 2)\n\t\t.attr('fill', 'transparent')\n\t\t.attr('stroke', d => color(d))\n\n\tlink = g_forceLayout.append('g').classed('links', true).selectAll('.link');\n\thull = g_forceLayout.append('g').classed('hulls', true).selectAll('.hull');\n\tnode = g_forceLayout.append('g').classed('nodes', true).selectAll('.node');\n\tpresumed = g_forceLayout.append('g').classed('presumed', true).selectAll('.presumed');\n\tlabel = g_forceLayout.append('g').classed('labels', true).selectAll('.label');\n\tinformation = g.append('g').classed('informations', true).selectAll('.information');\n\n\tsimulation = d3.forceSimulation(nodes)\n\t\t.force(\"collision\", d3.forceCollide(function(d) {\n\t\t\tlet thisCollisionPadding = d.totalSubNodes > 0 ? collisionPadding + 2 : collisionPadding;\n\t\t\treturn d.opened ? r(1) + thisCollisionPadding : r(d.totalSubNodes + 1) + thisCollisionPadding\n\t\t}).strength(.3).iterations(12))\n\t\t.force(\"link\", d3.forceLink()\n\t\t\t.strength(.45)\n\t\t\t.distance(r.range()[0])\n\t\t\t.id(function(d) { return d.id; })\n\t\t)\n\t\t.force(\"x\", d3.forceX(d => x(d.year)))\n\t\t.force(\"y\", d3.forceY(d => y(d.category)).strength(d => d.part_of === '' ? 0.1 : 0))\n\t\t.on(\"tick\", ticked)\n\t\t.on(\"end\", () => { console.log('simulation ended') })\n\t\t.stop()\n\n\tfunction ticked() {\n\t\tnode.attr(\"cx\", (d, i) => d.x)\n\t\t\t.attr(\"cy\", d => d.y);\n\n\t\tpresumed.attr(\"cx\", function(d) { return d.x; })\n\t\t\t.attr(\"cy\", function(d) { return d.y; });\n\n\t\tlabel.attr(\"x\", function(d) { return d.x; })\n\t\t\t.attr(\"y\", function(d) { return d.y; });\n\n\t\tlink.attr(\"x1\", function(d) { return d.source.x; })\n\t\t\t.attr(\"y1\", function(d) { return d.source.y; })\n\t\t\t.attr(\"x2\", function(d) { return d.target.x; })\n\t\t\t.attr(\"y2\", function(d) { return d.target.y; });\n\n\t\thull.attr(\"d\", function(d) {\n\t\t\tlet thisHullPoints = d.map(d => { return [d.x, d.y] });\n\t\t\tvar points = thisHullPoints;\n\t\t\tvar convexHull = (points.length < 3) ? points : d3.polygonHull(points);\n\t\t\treturn roundedHull(convexHull, d);\n\t\t})\n\t}\n\n\t// handle the zoom function\n\n\tlet zoom = d3.zoom()\n\t\t.translateExtent([\n\t\t\t[0, 0],\n\t\t\t[width + margin.left + margin.right, height + margin.top + margin.bottom]\n\t\t])\n\t\t.scaleExtent([1, 10])\n\t\t.on(\"zoom\", zoomed);\n\n\tfunction zoomed() {\n\t\t// so a simple resize+translate for the main group and the y axis\n\t\tg_forceLayout.attr(\"transform\", d3.event.transform);\n\t\tyAxis.attr(\"transform\", d3.event.transform);\n\n\t\t// the x axis has to be resscaled according to the zoom\n\t\t// taken from: https://bl.ocks.org/rutgerhofste/5bd5b06f7817f0ff3ba1daa64dee629d\n\t\tlet new_x = d3.event.transform.rescaleX(x);\n\t\txAxis.call(xAxisCall.scale(new_x))\n\n\t\t// rescale labels\n\t\tif(!originalLabelsSize) {\n\t\t\toriginalLabelsSize = d3.select('.label').style('font-size');\n\t\t\toriginalLabelsSize = parseFloat(originalLabelsSize);\n\t\t}\n\t\tconst newSize = originalLabelsSize / d3.event.transform.k\n\t\t// change style on the parent\n\t\t// this will propagate the new size to all children (label)\n\t\td3.select('g.labels').style('font-size', newSize + 'px')\n\n\t\t// display all labels of selected compositions\n\t\tif(d3.event.transform.k > 3) {\n\n\t\t\t// // make visible the lables of nodes selected\n\t\t\t// d3.selectAll('.node.selected').each(d => {\n\t\t\t// \tlabel.filter(l => l.id === d.id).classed('zoom-selected', true)\n\t\t\t// })\n\n\t\t\t// all labels visible\n\t\t\tlabel.classed('zoom-selected', true)\n\n\t\t} else {\n\t\t\tlabel.classed('zoom-selected', false)\n\t\t}\n\n\t\tinformation.attr('x', d => (new_x(d.year) >= width / 2) ? new_x(d.year) + 4.8 : new_x(d.year) - 3.2);\n\t}\n\n\tsvg.call(zoom).on(\"dblclick.zoom\", null);\n\n\t//Store data in global variable\n\tgraph = data;\n\t// globalTimeFilter = filter;\n\n\t// Precalculating the position of nodes allows to make them appear in place\n\tgraph.nodes = graph.nodes.map(d => {\n\t\treturn {\n\t\t\t...d,\n\t\t\tx: x(d.year),\n\t\t\ty: y(d.category)\n\t\t}\n\t})\n\n}\n\nV.update = (timeFilter) => {\n\t// console.log('update');\n\t// console.log('graph:', graph);\n\tif (timeFilter) {\n\t\tglobalTimeFilter = timeFilter\n\t} else {\n\t\ttimeFilter = globalTimeFilter\n\t}\n\n\t// update data\n\tnodes = graph.nodes;\n\tlinks = graph.edges;\n\n\t// update fx before updating the x scale\n\tnodes.forEach(d => {\n\t\tif(d.fx) {\n\t\t\td.correspondingYear = x.invert(d.fx)\n\t\t} else {\n\t\t\tdelete d.correspondingYear;\n\t\t}\n\t})\n\n\t// Update x domain\n\tx.domain(timeFilter)\n\txAxis.call(xAxisCall);\n\n\t// calculate new fx\n\tnodes.forEach(d => {\n\t\tif(d.correspondingYear) {\n\t\t\td.fx = x(d.correspondingYear)\n\t\t}\n\t})\n\n\tnode = node.data(nodes, d => { return d.id })\n\tnode.exit().remove();\n\tnode = node.enter().append('circle')\n\t\t.attr('class', d => `node`)\n\t\t.classed('sub-node', d => d.part_of !== '')\n\t\t// .classed('selected', d => d.isSelected )\n\t\t.attr('key', d => d.id)\n\t\t.on('mouseenter', d => {\n\t\t\tlabel.filter(l => l.id === d.id).style('display', 'block')\n\t\t\tnode.style('opacity', .25).filter(n => n.source === d.source).style('opacity', 1)\n\t\t\tdisplayTitle(d);\n\t\t})\n\t\t.on('mouseleave', d => {\n\t\t\tlabel.filter(l => l.id === d.id).style('display', 'none')\n\t\t\tnode.style('opacity', '')\n\t\t\tdisplayTitle(d);\n\t\t})\n\t\t.on('click', function(d) {\n\t\t\t// console.log('clicked on', d)\n\t\t\t// if double click/tap\n\t\t\tif((d3.event.timeStamp - last) < 500) {\n\t\t\t\ttoggleSubnodes(d, 'restart the force');\n\t\t\t}\n\t\t\tlast = d3.event.timeStamp;\n\n\t\t\tconst isSelected = d3.select(this).classed('selected')\n\t\t\t// do this after the nodes have been opened\n\t\t\tif (!isSelected) {\n\t\t\t\tselectLabel(d);\n\t\t\t\tselectSameComposition(d);\n\t\t\t\tdisplayTitle([d]);\n\t\t\t} else {\n\t\t\t\tunselectNode(d)\n\t\t\t\tunselectLabel(d);\n\t\t\t}\n\t\t})\n\t\t.merge(node)\n\t\t.style('cursor', function(d) { return d.subNodes && d.subNodes.length ? 'pointer' : 'auto'; })\n\t\t.attr(\"fill\", d => d.opened === true ? 'white' : color(d.category))\n\t\t.attr('stroke', function(d) { if(d.totalSubNodes > 0) return d3.color(color(d.category)).darker(1) })\n\t\t.attr(\"r\", function(d) { return d.opened ? r(1) : r(d.totalSubNodes + 1) }) // +1 means plus itself\n\n\tpresumed = presumed.data(nodes.filter(d => d.isGuessed), d => d.id)\n\tpresumed.exit().remove();\n\tpresumed = presumed.enter().append('circle')\n\t\t.classed('presumed', true)\n\t\t.attr('r', 1.5)\n\t\t.attr('fill', d => d3.color(color(d.category)).darker(1))\n\t\t.merge(presumed)\n\n\t// Apply the general update pattern to the links.\n\tlink = link.data(links, d => d.source.id + \"-\" + d.target.id);\n\tlink.exit().remove();\n\tlink = link.enter().append(\"line\")\n\t\t.classed('link', true)\n\t\t.classed('part-of', function(d) { return d.kind === 'part_of' })\n\t\t.attr('stroke-width', 0.5)\n\t\t.attr('stroke', '#ccc')\n\t\t.merge(link);\n\n\t// Apply the general update pattern to the labels.\n\tlabel = label.data(nodes, d => d.id);\n\tlabel.exit().remove();\n\tlabel = label.enter().append(\"text\")\n\t\t.classed('label', true)\n\t\t.style('display', 'none')\n\t\t.attr('text-anchor', 'middle')\n\t\t.style('pointer-events', 'none')\n\t\t.text(d => d.label)\n\t\t.merge(label);\n\n\t// Apply the general update pattern to the convex hulls.\n\thull = hull.data(hullsData, d => d[0].id);\n\thull.exit().remove();\n\thull = hull.enter().append(\"path\")\n\t\t.classed('hull', true)\n\t\t.attr('fill', d => color(d[0].category))\n\t\t.style('opacity', .25)\n\t\t.merge(hull);\n\n\tsimulation.nodes(nodes);\n\tif(simulation.force(\"link\")) {\n\t\tsimulation.force(\"link\").links(links);\n\t}\n\tsimulation.alpha(1).restart();\n\n}\n\nV.filter = (filter, selectLabelsArr) => {\n\t// console.log('viz', filter)\n\tapplyFilter(filter, 'do reset');\n\n\tif (selectLabelsArr && selectLabelsArr.length <= 5) {\n\t\tselectLabelsArr.forEach(an_id => {\n\t\t\tconst obj = { id: an_id }\n\t\t\tselectLabel(obj)\n\t\t})\n\t}\n}\n\nV.openOnSearch = (arr) => {\n\tlet parents2open = [];\n\tarr.forEach(s => {\n\t\tsearch4Parent(s);\n\t});\n\n\t// console.log(parents2open);\n\n\tfunction search4Parent(nodeId) {\n\t\tconst thisNode = originalData.filter(od => od.id === nodeId)[0];\n\t\tif(thisNode.part_of !== \"\") {\n\t\t\tparents2open.push(thisNode.part_of);\n\t\t\tsearch4Parent(thisNode.part_of);\n\t\t}\n\t}\n\n\tif(parents2open.length > 0) {\n\t\tparents2open.reverse().forEach((parentId, i) => {\n\t\t\tconst parent_id = originalData.filter(od => od.id === parentId)[0].id;\n\t\t\t// surviveFilters[2].push(parent_id);\n\t\t\tconst parent = nodes.filter(d => d.id === parent_id)[0]\n\t\t\topenSubnodes(parent, 'do not restart the force');\n\t\t})\n\n\t\tV.update()\n\t}\n\n}\n\nV.openAll = () => {\n\trunAll(nodes);\n\n\tfunction runAll(nodesList) {\n\t\tnodesList.forEach(n => {\n\t\t\tif(n.totalSubNodes > 0) {\n\t\t\t\topenSubnodes(n, 'do not restart simulation');\n\t\t\t\trunAll(n.subNodes);\n\t\t\t}\n\t\t});\n\t}\n}\n\nV.closeAll = () => {\n\tnodes.filter(d => d.part_of === '').forEach(function(d) {\n\t\tcloseSubnodes(d, 'do not restart simulation');\n\t})\n}\n\nV.destroy = () => {}\n\n// Other functions\nconst openSubnodes = (d, doRestart) => {\n\t// If it happens that the node is already open, just skip.\n\tif(d.opened) return;\n\n\t// If not, let's open it\n\td.opened = true;\n\n\t// fix the position only if it is a \"root node\"\n\tif(d.part_of === '') {\n\t\td.fx = d.x;\n\t\td.fy = d.y;\n\t} else {\n\t\td.x = nodes.filter(n => n.id === d.part_of)[0].x\n\t\td.fy = nodes.filter(n => n.id === d.part_of)[0].y + r.range()[0] * 2 * 3\n\t}\n\n\t// make subnodes appear at the place of their parent\n\td.subNodes.forEach(function(subNode) {\n\t\tsubNode.x = d.x;\n\t\tsubNode.y = d.y;\n\t\t// subNode.isSelected = true;\n\t})\n\n\t// Make convex hull\n\tvar thisHullNodes = [d].concat(d.subNodes); // first element in array is always the one opened, so we can use its ID as identifier for the convex hull\n\thullsData.push(thisHullNodes);\n\n\t// check if the first point of the hull is inside another hulls\n\t// if so it means this hull should be part of that opened\n\t// add these points to that hullsData\n\thullsData.forEach(function(thisHull) {\n\t\t// if the element is in the array, but is not the first\n\t\tif(thisHull.indexOf(thisHullNodes[0]) > 0) {\n\t\t\tthisHullNodes.forEach(function(n, i) {\n\t\t\t\tif(i !== 0) {\n\t\t\t\t\tthisHull.push(n);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t})\n\n\t// calculate Graph\n\tvar augmentedNodes = nodes.concat(d.subNodes);\n\tgraph = ParseMatrixData.calculateNetwork(augmentedNodes);\n\tnodes = graph.nodes;\n\tlinks = graph.edges;\n\tif(doRestart === 'restart the force') {\n\t\tV.update();\n\t}\n}\nconst closeSubnodes = (d, doRestart) => {\n\t// If it is already opened or if it has no children, just skip\n\tif(!d.opened || d.totalSubNodes === 0) return;\n\n\td.opened = false;\n\tdelete d.fx;\n\tdelete d.fy;\n\n\tvar subNodes2Remove = [];\n\tvar hulls2Remove = [d.id]\n\n\t// recursive functions, it makes possible to close contained cluster of nodes\n\tfunction collectSubNodes(parentNode) {\n\t\tparentNode.subNodes.forEach(childNode => {\n\t\t\tif(childNode.opened) {\n\t\t\t\tchildNode.opened = false;\n\t\t\t\thulls2Remove.push(childNode.id);\n\t\t\t\tcollectSubNodes(childNode);\n\t\t\t}\n\t\t});\n\t\tsubNodes2Remove.push(parentNode.subNodes);\n\t}\n\n\tcollectSubNodes(d);\n\n\t// cycle in the subNodes2Remove array and for each list of sub-nodes to be removed remove and re-calculate the network.\n\t// Probably not the best way, but the simplest at the moment of the coding.\n\tsubNodes2Remove.forEach(subNodes => {\n\n\t\tlet toRemove = subNodes.map(d => d.id)\n\t\tlet filtered = nodes.filter(el => {\n\t\t\treturn !toRemove.includes(el.id);\n\t\t})\n\n\t\t// remove this hull\n\t\thullsData = hullsData.filter(function(h) {\n\t\t\treturn !hulls2Remove.includes(h[0].id);\n\t\t})\n\n\t\t// remove extra points from the outer hull\n\t\thullsData.forEach(function(thisHull, i) {\n\t\t\thullsData[i] = thisHull.filter(function(n) {\n\t\t\t\treturn !toRemove.includes(n.id);\n\t\t\t})\n\t\t})\n\n\t\t// calculate graph\n\t\tgraph = ParseMatrixData.calculateNetwork(filtered)\n\t\tnodes = graph.nodes;\n\t\tlinks = graph.edges;\n\t})\n\n\tif(doRestart === 'restart the force') {\n\t\tV.update();\n\t}\n}\nconst toggleSubnodes = (d, doRestart) => {\n\t// console.log(\"Ohhhhh, let's toggle the sub nodes of\", d.label, d.id)\n\tif(d.opened) {\n\t\tunselectLabel(d);\n\t\tcloseSubnodes(d, doRestart);\n\t} else if(d.subNodes && d.subNodes.length) {\n\t\tselectLabel(d);\n\t\topenSubnodes(d, doRestart);\n\t} else {\n\t\tconsole.log('No nodes to expand');\n\t}\n}\n\n// Interactions\nconst displayTitle = (data) => {\n\tif (Array.isArray(data)) {\n\t\t// show composition title\n\t\tinformation = information.data(data, function(d) { return d.id; });\n\t\tinformation.exit().remove();\n\t\tinformation = information.enter().append(\"text\")\n\t\t\t.classed('information', true)\n\t\t\t.attr('text-anchor', d => (x(d.year) >= width / 2) ? 'end' : 'start')\n\t\t\t.attr('x', d => (x(d.year) >= width / 2) ? x(d.year) + 4.8 : x(d.year) - 3.2)\n\t\t\t.attr('y', height - 10)\n\t\t\t.text(d => (x(d.year) >= width / 2) ? d.sourceTitle + ' ↓' : '↓ ' + d.sourceTitle)\n\t\t\t.merge(information);\n\t}\n}\n\nconst selectLabel = (d) => {\n\tlabel.filter(l => l.id === d.id).classed('selected', true)\n}\nconst unselectLabel = (d) => {\n\tlabel.filter(l => l.id === d.id).classed('selected', false)\n}\n\nconst selectNode = (d) => {\n\tsvg.classed('there-is-selection', true)\n\tnode.filter(n => n.id === d.id).classed('selected', true)\n}\nconst unselectNode = (d) => {\n\tnode.filter(n => n.id === d.id).classed('selected', false)\n\n\tif(svg.selectAll('.selected').size() === 0) {\n\t\tsvg.classed('there-is-selection', false)\n\t}\n}\n\nconst applyFilter = (filter, doReset,alsoCategories) => {\n\tif (doReset==='do reset') {reset();}\n\tsvg.classed('there-is-filter', true)\n\tnode.classed('filtered', false).filter(n => filter.indexOf(n.id) < 0).classed('filtered', true)\n}\n\nconst selectSameComposition = (d) => {\n\tsvg.classed('there-is-selection', true)\n\tnode.filter(n => n.source === d.source).classed('selected', true)\n}\nconst unselectSameComposition = (d) => {\n\tnode.filter(n => n.source === d.source).classed('selected', false)\n\n\tif(svg.selectAll('.selected').size() === 0) {\n\t\tsvg.classed('there-is-selection', false)\n\t}\n}\n\nconst reset = (alsoCategories) => {\n\tsvg.selectAll('*').classed('selected', false).classed('zoom-selected', false);\n\tnode.classed('filtered', false)\n\tif (alsoCategories === 'also categories') {\n\t\tsvg.selectAll('.tick').classed('cat-selected', false).selectAll('rect').attr('fill', 'transparent')\n\t}\n\tsvg.classed('there-is-selection', false)\n\tdisplayTitle([]);\n}\n\n//\n//\n//\n//\n// convex hull from http://bl.ocks.org/hollasch/f70f1fe7700f092b5a505e3efd1d9232\n//\n//\n//\n//\n\nvar hullPadding = collisionPadding;\n\nvar vecScale = function(scale, v) {\n\t// Returns the vector 'v' scaled by 'scale'.\n\treturn [scale * v[0], scale * v[1]];\n}\n\nvar vecSum = function(pv1, pv2) {\n\t// Returns the sum of two vectors, or a combination of a point and a vector.\n\treturn [pv1[0] + pv2[0], pv1[1] + pv2[1]];\n}\n\nvar unitNormal = function(p0, p1) {\n\t// Returns the unit normal to the line segment from p0 to p1.\n\tvar n = [p0[1] - p1[1], p1[0] - p0[0]];\n\tvar nLength = Math.sqrt(n[0] * n[0] + n[1] * n[1]);\n\treturn [n[0] / nLength, n[1] / nLength];\n};\n\nvar strictHull = function(polyPoints) {\n\t// This method returns a polygon given the specified points. The points are assumed to be in polygon order.\n\treturn (\n\t\t'M ' + polyPoints[0] +\n\t\t' L ' +\n\t\td3.range(1, polyPoints.length)\n\t\t.map(function(i) { return polyPoints[i]; })\n\t\t.join(' L') +\n\t\t' Z'\n\t);\n};\n\nvar roundedHull = function(polyPoints, data) {\n\t// Returns the SVG path data string representing the polygon, expanded and rounded.\n\thullPadding = d3.max(data, function(d) {\n\t\treturn d.opened ? r(1) + collisionPadding : r(d.totalSubNodes + 1) + collisionPadding;\n\t})\n\n\t// Handle special cases\n\tif(!polyPoints || polyPoints.length < 1) return \"\";\n\tif(polyPoints.length === 1) return roundedHull1(polyPoints, data);\n\tif(polyPoints.length === 2) return roundedHull2(polyPoints, data);\n\n\tvar segments = new Array(polyPoints.length);\n\n\t// Calculate each offset (outwards) segment of the convex hull.\n\tfor(var segmentIndex = 0; segmentIndex < segments.length; ++segmentIndex) {\n\t\tvar p0 = (segmentIndex === 0) ? polyPoints[polyPoints.length - 1] : polyPoints[segmentIndex - 1];\n\t\tvar p1 = polyPoints[segmentIndex];\n\n\t\t// Compute the offset vector for the line segment, with length = hullPadding.\n\t\tvar offset = vecScale(hullPadding, unitNormal(p0, p1));\n\n\t\tsegments[segmentIndex] = [vecSum(p0, offset), vecSum(p1, offset)];\n\t}\n\n\tvar arcData = 'A ' + [hullPadding, hullPadding, '0,0,0,'].join(',');\n\n\tsegments = segments.map(function(segment, index) {\n\t\tvar pathFragment = \"\";\n\t\tif(index === 0) {\n\t\t\tpathFragment = 'M ' + segments[segments.length - 1][1] + ' ';\n\t\t}\n\t\tpathFragment += arcData + segment[0] + ' L ' + segment[1];\n\n\t\treturn pathFragment;\n\t});\n\n\treturn segments.join(' ');\n}\n\nvar roundedHull1 = function(polyPoints, data) {\n\t// Returns the path for a rounded hull around a single point (a circle).\n\n\tvar p1 = [polyPoints[0][0], polyPoints[0][1] - hullPadding];\n\tvar p2 = [polyPoints[0][0], polyPoints[0][1] + hullPadding];\n\n\treturn 'M ' + p1 +\n\t\t' A ' + [hullPadding, hullPadding, '0,0,0', p2].join(',') +\n\t\t' A ' + [hullPadding, hullPadding, '0,0,0', p1].join(',');\n};\n\nvar roundedHull2 = function(polyPoints, data) {\n\t// Returns the path for a rounded hull around two points (a \"capsule\" shape).\n\n\tvar offsetVector = vecScale(hullPadding, unitNormal(polyPoints[0], polyPoints[1]));\n\tvar invOffsetVector = vecScale(-1, offsetVector);\n\n\tvar p0 = vecSum(polyPoints[0], offsetVector);\n\tvar p1 = vecSum(polyPoints[1], offsetVector);\n\tvar p2 = vecSum(polyPoints[1], invOffsetVector);\n\tvar p3 = vecSum(polyPoints[0], invOffsetVector);\n\n\treturn 'M ' + p0 +\n\t\t' L ' + p1 + ' A ' + [hullPadding, hullPadding, '0,0,0', p2].join(',') +\n\t\t' L ' + p3 + ' A ' + [hullPadding, hullPadding, '0,0,0', p0].join(',');\n};\n","import React, { Component } from 'react';\nimport '../../App.css';\nimport './RangeFilter.css';\n\nimport Viz from './range-filter.d3'\n\nclass RangeFilter extends Component {\n\n  componentDidMount() {\n    this._chart = Viz.initialize(this._rootNode, this.props.data, this.props.changeOptions);\n  }\n\n  componentDidUpdate() {\n  }\n\n  componentWillUnmount() {\n    Viz.destroy(this._rootNode);\n  }\n\n  _setRef(componentNode) {\n      this._rootNode = componentNode;\n  }\n\n  render() {\n    // console.log(this.props.data)\n    return <div style={this.props.style} ref={this._setRef.bind(this)}><svg className=\"range-filter\"></svg></div>;\n  }\n}\n\nexport default RangeFilter;\n\n// RangeFilter.defaultProps = {\n//   title: 'Time Filter',\n//   style: {\n//     gridColumn: 'span 4'\n//   }\n// }\n","import * as d3 from 'd3'\n\nconst ParseMatrixData = {}\n\nParseMatrixData.parser = (rawData) => {\n\n  rawData.forEach(function(d){ d.year = new Date(d.year); })\n\n  let data = rawData.map(function(d) {\n    d.year = new Date(d.year);\n    if(!d.id) { d.id = d['data.id'] }\n    var obj = {\n\t\t\t'id': d.id,\n\t\t\t'label': d['Occorrenza'],\n\t\t\t'part_of': d['Parte di ID'],\n\t\t\t'source': d['Fonte'],\n\t\t\t'sourceTitle': d['Titolo Fonte'],\n\t\t\t'year': +d.year,\n\t\t\t'category': d['Categoria'],\n\t\t\t'totalSubNodes':0,\n      'publicationType': d['Pubblicazione Fonte'].split(';'),\n      'pubVenueTitle': d['Pubblicazioni Titoli'],\n      'isGuessed': d['Luogo desunto'],\n      'themes': d['Tema'].split(';')\n\t\t}\n\t\treturn obj\n\t})\n\n  const hierarchies = ParseMatrixData.handleHierarchies(data)\n\n  const graph = ParseMatrixData.calculateNetwork(hierarchies);\n  return {graph,data};\n}\n\nParseMatrixData.handleHierarchies = (nodes) => {\n  let hierarchies = d3.nest()\n\t\t.key(function(d){ return d.part_of })\n\t\t.entries(nodes);\n\n\thierarchies\n\t\t.filter(function(d){ return d.key === '' })[0]\n\t\t.values.forEach(function(d){\n\t\t\tvar part_of_d = hierarchies.find(function(e){ return e.key === d.id })\n\t\t\tif (part_of_d) {\n\t\t\t\t// console.log('LVL 0',d.id, d.label, 'is parent of', part_of_d.values.length);\n\t\t\t\td.subNodes = part_of_d.values;\n\t\t\t\td.totalSubNodes = part_of_d.values.length\n\n\t\t\t\tpart_of_d.values.forEach(function(e){\n\t\t\t\t\tvar part_of_e = hierarchies.find(function(f){ return f.key === e.id })\n\t\t\t\t\tif (part_of_e) {\n\t\t\t\t\t\t// console.log('LVL 1',e.id, e.label, 'is parent of', part_of_e.values.length);\n\t\t\t\t\t\te.subNodes = part_of_e.values\n\t\t\t\t\t\te.totalSubNodes = part_of_e.values.length\n\t\t\t\t\t\td.totalSubNodes += e.totalSubNodes\n\n\t\t\t\t\t\tpart_of_e.values.forEach(function(f){\n\t\t\t\t\t\t\tvar part_of_f = hierarchies.find(function(g){ return g.key === f.id})\n\t\t\t\t\t\t\tif (part_of_f) {\n\t\t\t\t\t\t\t\t// console.log('LVL 2', f.id, f.label, 'is parent of', part_of_f.values.length)\n\t\t\t\t\t\t\t\tf.subNodes = part_of_f.values\n\t\t\t\t\t\t\t\tf.totalSubNodes = part_of_f.values.length\n\t\t\t\t\t\t\t\td.totalSubNodes += f.totalSubNodes\n\n\t\t\t\t\t\t\t\tpart_of_f.values.forEach(function(g){\n\t\t\t\t\t\t\t\t\tvar part_of_g = hierarchies.find(function(h){ return h.key === g.id })\n\t\t\t\t\t\t\t\t\tif (part_of_g) {\n\t\t\t\t\t\t\t\t\t\t// console.log('LVL 3', g.id, g.label, 'is parent of', part_of_g.values.length)\n\t\t\t\t\t\t\t\t\t\tg.subNodes = part_of_g.values\n\t\t\t\t\t\t\t\t\t\tg.totalSubNodes = part_of_g.values.length\n\t\t\t\t\t\t\t\t\t\td.totalSubNodes += f.totalSubNodes\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t// return array of hierarchical nodes\n\treturn hierarchies.filter(function(d){ return d.key === '' })[0].values;\n}\n\nParseMatrixData.calculateNetwork = (nodes) => {\n\t// create the array of edges\n\tvar edges = []\n\t// base edges on works co-occurrences of places\n\td3.nest()\n\t\t.key(function(d) { return d.source })\n\t\t.entries(nodes)\n\t\t.forEach((d) => {\n\t\t\td.values.filter(function(e) {\n\t\t\t\treturn e.part_of !== '';\n\t\t\t}).forEach((n, i) => {\n\t\t\t\tvar obj = {}\n\t\t\t\tobj = {\n\t\t\t\t\t'source': n.id,\n\t\t\t\t\t'target': n.part_of,\n\t\t\t\t\t'volume': d.key,\n\t\t\t\t\t// 'year': n.year,\n\t\t\t\t\t'source_part_of': n.part_of,\n\t\t\t\t\t'kind': 'part_of'\n\t\t\t\t}\n\t\t\t\tedges.push(obj);\n\t\t\t})\n\t\t})\n\treturn { 'nodes': nodes, 'edges': edges, 'root_nodes': nodes.filter(d => d.subNodes)}\n}\n\nexport default ParseMatrixData\n","import React, { Component } from 'react';\nimport './PlacesMatrix.css'\nimport V from './matrix.d3'\n\nclass PlacesMatrix extends Component {\n\n  componentDidMount() {\n    // console.log('componentDidMount')\n    V.initialize(this._rootNode, this.props.data, this.props.originalData, this.props.onChangeCategorie, this.props.resetFilter)\n    V.update(this.props.timeFilter);\n    V.filter(this.props.filter)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log('componentDidUpdate')\n\n    if (this.props.filter !== prevProps.filter) {\n      // console.log('new filters')\n      if (this.props.searched.length !== this.props.originalData.length) {\n        V.openOnSearch(this.props.searched)\n      }\n      const selectThoseLabels = this.props.searched;\n      V.filter(this.props.filter, selectThoseLabels)\n    }\n\n    if (this.props.timeFilter !== prevProps.timeFilter) {\n      V.update(this.props.timeFilter)\n    }\n\n    if (this.props.gruppi !== prevProps.gruppi) {\n      console.log(this.props.gruppi)\n      if (this.props.gruppi === 'aperti') {\n        V.openAll();\n      } else if (this.props.gruppi === 'chiusi') {\n        V.closeAll();\n      }\n      V.update();\n    }\n  }\n\n  componentWillUnmount() {\n    // console.log('componentWillUnmount')\n    V.destroy(this._rootNode);\n  }\n\n  _setRef(componentNode) {\n      this._rootNode = componentNode;\n  }\n\n  render() {\n    const style={\n      width: '100%',\n      height: '100%'\n    }\n    return <svg id={this.props.id} style={style} ref={this._setRef.bind(this)}></svg>\n  }\n}\n\nexport default PlacesMatrix;\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport GlobalData from '../utilities/GlobalData';\n\nimport MainMenu from '../general/MainMenu';\nimport PageTitle from '../general/PageTitle';\nimport MoreInfo from '../general/MoreInfo';\nimport Bussola from '../general/Bussola';\n\nimport Loading from '../general/Loading';\n\nimport Options from '../general/Options';\nimport Search from '../general/Search';\nimport RangeFilter from '../general/RangeFilter';\n\nimport PlacesMatrix from '../visualizations/PlacesMatrix';\nimport ParseMatrixData from '../utilities/parse-matrix-data';\n\nclass Trasformare extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.changeCercaPer = this.changeCercaPer.bind(this);\n\t\tthis.changeRicerca = this.changeRicerca.bind(this);\n\n\t\tthis.changeGruppi = this.changeGruppi.bind(this);\n\t\tthis.changePubblicazioni = this.changePubblicazioni.bind(this);\n\t\tthis.changeAmbienti = this.changeAmbienti.bind(this);\n\t\tthis.changeCategorie = this.changeCategorie.bind(this);\n\n\t\tthis.resetFilter = this.resetFilter.bind(this);\n\n\t\tthis.changeTimeSpan = this.changeTimeSpan.bind(this);\n\n    this.downloadData = this.downloadData.bind(this);\n\n\t\tthis.state = {\n\t\t\tdata: 'data still not loaded',\n\t\t\tfilter: [],\n\t\t\tisLoading: true,\n\t\t\tcerca_per: {\n\t\t\t\tmultiple: false,\n\t\t\t\toptions: [{\n\t\t\t\t\t'label': 'luogo',\n\t\t\t\t\t'status': true\n\t\t\t\t}, {\n\t\t\t\t\t'label': 'titolo pubblicazione',\n\t\t\t\t\t'status': false\n\t\t\t\t}, {\n\t\t\t\t\t'label': 'titolo',\n\t\t\t\t\t'status': false\n\t\t\t\t}]\n\t\t\t},\n\t\t\tgruppi: {\n\t\t\t\tmultiple: false,\n\t\t\t\toptions: [{\n\t\t\t\t\t'label': 'aperti',\n\t\t\t\t\t'status': false\n\t\t\t\t}, {\n\t\t\t\t\t'label': 'chiusi',\n\t\t\t\t\t'status': true\n\t\t\t\t}]\n\t\t\t}\n\t\t};\n\t}\n\n\tloadData() {\n\t\td3.tsv(process.env.PUBLIC_URL + '/places-matrix-data.tsv').then(data => {\n\n\t\t\t// console.log(data)\n\n\t\t\tconst graph = ParseMatrixData.parser(data);\n\t\t\treturn graph;\n\t\t}).then(data => {\n\n\t\t\tlet themes = data.data.map(d => d.themes).flat()\n\t\t\tthemes = themes.filter((d, i) => themes.indexOf(d) === i)\n\t\t\tthemes = themes.filter((d) => d !== '' && d !== \" \")\n\t\t\t// console.log(themes)\n\n\t\t\tlet kinds = data.data.map(d => d.publicationType).flat()\n\t\t\tkinds = kinds.filter((d, i) => kinds.indexOf(d) === i)\n\t\t\tkinds = kinds.filter((d) => d !== '' && d !== \" \")\n\t\t\tkinds = kinds.map(d => {\n\t\t\t\treturn { 'label': d, 'status': true }\n\t\t\t})\n\t\t\t// console.log(kinds)\n\n\t\t\tlet environments = data.data.map(d => d.themes).flat()\n\t\t\tenvironments = environments.filter((d, i) => environments.indexOf(d) === i)\n\t\t\tenvironments = environments.filter((d) => d !== '' && d !== \" \")\n\t\t\tenvironments = environments.map(d => {\n\t\t\t\treturn { 'label': d, 'status': true }\n\t\t\t})\n\t\t\t// console.log(environments)\n\n\t\t\tlet allTitles = data.data.map(d => d.pubVenueTitle.split(';'));\n\t\t\tallTitles = allTitles.flat();\n\t\t\tallTitles = d3.nest().key(d => d).entries(allTitles).map(d => d.key);\n\n\t\t\tlet nodesByPublicationTitle = []\n\t\t\tallTitles.forEach(d => {\n\t\t\t\tlet publishedHere = data.data.filter(e => {\n\t\t\t\t\treturn e.pubVenueTitle.includes(d)\n\t\t\t\t})\n\t\t\t\tlet obj = {\n\t\t\t\t\t'label': d,\n\t\t\t\t\t'id': [publishedHere.map(d => d.id)],\n\t\t\t\t\t'status': true\n\t\t\t\t}\n\t\t\t\tnodesByPublicationTitle.push(obj)\n\t\t\t})\n\n\t\t\tlet searchByCompositionTitle = d3.nest().key(d => d.sourceTitle).entries(data.data).map(d => {\n\t\t\t\treturn {\n\t\t\t\t\t'label': d.key,\n\t\t\t\t\t'id': d.values.map(dd => dd.id),\n\t\t\t\t\t'status': true\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tlet searchByLuogo = d3.nest().key(d => d.label).entries(data.data).map(d => {\n\t\t\t\treturn {\n\t\t\t\t\t'label': d.key,\n\t\t\t\t\t'id': d.values.map(dd => dd.id),\n\t\t\t\t\t'status': true\n\t\t\t\t}\n\t\t\t}).sort((a, b) => a.label.localeCompare(b.label))\n\n\t\t\tlet data_research = {\n\t\t\t\t// luogo: data.data.map(d=>{ return { 'label':d.label, 'id': [d.id], 'status': true } }),\n\t\t\t\tluogo: searchByLuogo,\n\t\t\t\t'titolo pubblicazione': nodesByPublicationTitle,\n\t\t\t\ttitolo: searchByCompositionTitle\n\t\t\t}\n\n\t\t\tlet time = d3.extent(data.data, d => d.year)\n\t\t\t// console.log(time)\n\n\t\t\tthis.setState({\n\t\t\t\tdata: data.graph,\n\t\t\t\toriginalData: data.data,\n\t\t\t\tfilter: data.data.map(d => d.id),\n\t\t\t\tnoFilter: data.data.map(d => d.id),\n\t\t\t\tisLoading: false,\n\t\t\t\tdata_research: data_research,\n\t\t\t\tricerca: {\n\t\t\t\t\toptions: data_research.luogo\n\t\t\t\t},\n\t\t\t\ttoPreserveRicerca: data.data.map(d => d.id),\n\t\t\t\tpubblicazioni: {\n\t\t\t\t\tmultiple: true,\n\t\t\t\t\toptions: kinds\n\t\t\t\t},\n\t\t\t\tricercaOptionsSearched: [],\n\t\t\t\ttoPreservePubblicazioni: data.data.map(d => d.id),\n\t\t\t\tvolumi: {\n\t\t\t\t\tmultiple: true,\n\t\t\t\t\toptions: GlobalData.allVolumes.map(d => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...d,\n\t\t\t\t\t\t\t'status': true\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\ttoPreserveVolumi: data.data.map(d => d.id),\n\t\t\t\tambienti: {\n\t\t\t\t\tmultiple: true,\n\t\t\t\t\toptions: environments\n\t\t\t\t},\n\t\t\t\ttoPreserveAmbienti: data.data.map(d => d.id),\n\t\t\t\ttoPreserveCategorie: data.data.map(d => d.id),\n\t\t\t\ttimeExtent: time,\n\t\t\t\ttimeFilter: time,\n\t\t\t\tupdate: false\n\t\t\t})\n\t\t})\n\t}\n\n\tchangeCercaPer(newOptions) {\n\t\tlet selection = newOptions.filter(d => d.status)\n\t\tif(selection.length < 1) {\n\t\t\tconsole.error('err');\n\t\t\treturn;\n\t\t}\n\t\tselection = selection[0].label\n\t\t// console.log(selection)\n\n\t\tlet research_options = this.state.data_research[selection];\n\n\t\tthis.setState(prevState => ({\n\t\t\tcerca_per: {\n\t\t\t\t...prevState.cerca_per,\n\t\t\t\toptions: newOptions\n\t\t\t},\n\t\t\tricerca: {\n\t\t\t\t...prevState.ricerca,\n\t\t\t\toptions: research_options\n\t\t\t}\n\t\t}))\n\t}\n\n\tchangeGruppi(newOptions) {\n\t\tthis.setState({\n\t\t\tstatoGruppi: newOptions.filter(d => d.status)[0].label\n\t\t})\n\t}\n\n\tchangeRicerca(newOptions) {\n\n\t\tlet toPreserve = newOptions.map(d => d.id)\n\t\ttoPreserve = _.flattenDeep(toPreserve)\n\n\t\t// In case it is empty, to prevent bugs, make it equal to any other fitler\n\t\tif(toPreserve.length === 0) {\n\t\t\ttoPreserve = this.state.toPreserveVolumi\n\t\t}\n\n\t\tthis.setState(prevState => ({\n\t\t\tricerca: {\n\t\t\t\t...prevState.ricerca,\n\t\t\t\t// options: newOptions\n\t\t\t},\n\t\t\tricercaOptionsSearched: newOptions,\n\t\t\ttoPreserveRicerca: toPreserve,\n\t\t\tfilter: _.intersection(prevState.noFilter,\n\t\t\t\ttoPreserve,\n\t\t\t\tprevState.toPreservePubblicazioni,\n\t\t\t\tprevState.toPreserveVolumi,\n\t\t\t\tprevState.toPreserveAmbienti,\n\t\t\t\tprevState.toPreserveCategorie)\n\t\t}))\n\n\t}\n\n\tchangePubblicazioni(newOptions) {\n\n\t\tconst criteria = newOptions.filter(d => d.status).map(d => d.label)\n\t\tconst toPreserve = this.state.originalData.filter(node => {\n\t\t\treturn node.publicationType.filter(value => criteria.includes(value)).length > 0\n\t\t}).map(d => d.id)\n\n\t\tthis.setState(prevState => ({\n\t\t\tpubblicazioni: {\n\t\t\t\t...prevState.pubblicazioni,\n\t\t\t\toptions: newOptions\n\t\t\t},\n\t\t\ttoPreservePubblicazioni: toPreserve,\n\t\t\tfilter: _.intersection(prevState.noFilter,\n\t\t\t\tprevState.toPreserveRicerca,\n\t\t\t\ttoPreserve,\n\t\t\t\tprevState.toPreserveVolumi,\n\t\t\t\tprevState.toPreserveAmbienti,\n\t\t\t\tprevState.toPreserveCategorie)\n\t\t}))\n\t}\n\n\tchangeAmbienti(newOptions) {\n\n\t\tconst criteria = newOptions.filter(d => d.status).map(d => d.label)\n\t\tconst toPreserve = this.state.originalData.filter(node => {\n\t\t\treturn node.themes.filter(value => criteria.includes(value)).length > 0\n\t\t}).map(d => d.id)\n\n\t\tthis.setState(prevState => ({\n\t\t\tambienti: {\n\t\t\t\t...prevState.ambienti,\n\t\t\t\toptions: newOptions\n\t\t\t},\n\t\t\ttoPreserveAmbienti: toPreserve,\n\t\t\tfilter: _.intersection(prevState.noFilter,\n\t\t\t\tprevState.toPreserveRicerca,\n\t\t\t\tprevState.toPreservePubblicazioni,\n\t\t\t\tprevState.toPreserveVolumi,\n\t\t\t\ttoPreserve,\n\t\t\t\tprevState.toPreserveCategorie)\n\t\t}))\n\t}\n\n\tchangeCategorie(selectedCategory) {\n\t\tlet toPreserve = this.state.originalData.map(d => d.id);\n\t\tif (selectedCategory) {\n\t\t\ttoPreserve = toPreserve.filter( d=>this.state.originalData.find(dd=>dd.id===d).category===selectedCategory );\n\t\t}\n\n\t\tthis.setState(prevState => ({\n\t\t\ttoPreserveCategorie: toPreserve,\n\t\t\tfilter: _.intersection(prevState.noFilter,\n\t\t\t\tprevState.toPreserveRicerca,\n\t\t\t\tprevState.toPreservePubblicazioni,\n\t\t\t\tprevState.toPreserveVolumi,\n\t\t\t\tprevState.toPreserveAmbienti,\n\t\t\t\ttoPreserve\n\t\t\t)\n\t\t}))\n\t}\n\n\tresetFilter() {\n\t\tconsole.log(this.state)\n\n\t\tconst ambientiOptions = this.state.ambienti.options.map(d=>{\n\t\t\treturn {\n\t\t\t\t...d,\n\t\t\t\tstatus: true\n\t\t\t}\n\t\t})\n\n\t\tconst pubblicazioniOptions = this.state.pubblicazioni.options.map(d=>{\n\t\t\treturn {\n\t\t\t\t...d,\n\t\t\t\tstatus: true\n\t\t\t}\n\t\t})\n\n\t\tthis.setState(prevState => ({\n\t\t\ttoPreserveRicerca: prevState.noFilter,\n\t\t\tricercaOptionsSearched: [],\n\t\t\ttoPreservePubblicazioni: prevState.noFilter,\n\t\t\tpubblicazioni: {\n\t\t\t\t...prevState.pubblicazioni,\n\t\t\t\toptions: pubblicazioniOptions\n\t\t\t},\n\t\t\ttoPreserveAmbienti: prevState.noFilter,\n\t\t\tambienti: {\n\t\t\t\t...prevState.ambienti,\n\t\t\t\toptions: ambientiOptions\n\t\t\t},\n\t\t\ttoPreserveVolumi: prevState.noFilter,\n\t\t\ttoPreserveCategorie: prevState.noFilter,\n\t\t\tfilter: prevState.noFilter\n\t\t}));\n\n\n\t}\n\n\tchangeTimeSpan(newOptions) {\n\t\tnewOptions = newOptions.map(d => {\n\t\t\treturn +new Date(d)\n\t\t})\n\t\tthis.setState({ 'timeFilter': newOptions })\n\t}\n\n\tdownloadData(event) {\n\t\tif(event.key !== 'd') return;\n\n    const selected = d3.selectAll('.node:not(.filtered)')\n  \tlet selectedData = selected.data()\n\n  \tselectedData = d3.nest()\n  \t\t.key(d => d.source)\n  \t\t.entries(selectedData)\n  \t\t.map(d => {\n  \t\t\treturn {\n  \t\t\t\t'composition_id': d.key,\n  \t\t\t\t'composition_title': d.values[0].sourceTitle\n  \t\t\t}\n  \t\t})\n\n    let export_data = 'Compositions titles surviving filters\\n\\n';\n\n    export_data += `Ambienti attivati: ${this.state.ambienti.options.filter(d=>d.status).map(d=>d.label).join(', ')}\\n`\n    export_data += `Pubblicazioni attivate: ${this.state.pubblicazioni.options.filter(d=>d.status).map(d=>d.label).join(', ')}\\n`\n    export_data += `Ricerca effettuata: ${this.state.ricercaOptionsSearched.map(d=>d.label).join(', ')}\\n`\n    export_data += `\\n\\n`\n\n    export_data += `composition_id\\tcomposition_title\\n`\n    selectedData.forEach(d=>{\n    \texport_data += d.composition_id + '\\t' + d.composition_title + \"\\n\"\n    })\n\n  \tlet the_date = new Date()\n  \tthe_date = d3.timeFormat(\"%Y_%m_%d %X\")(the_date)\n\n  \tdownload(export_data, `selection [${the_date}].txt`, 'text/plain')\n\n  \t// Function to download data to a file\n  \tfunction download(data, filename, type) {\n  \t\tconsole.log('download')\n  \t\tvar file = new Blob([data], { type: type });\n  \t\tif(window.navigator.msSaveOrOpenBlob) // IE10+\n  \t\t\twindow.navigator.msSaveOrOpenBlob(file, filename);\n  \t\telse { // Others\n  \t\t\tvar a = document.createElement(\"a\"),\n  \t\t\t\turl = URL.createObjectURL(file);\n  \t\t\ta.href = url;\n  \t\t\ta.download = filename;\n  \t\t\tdocument.body.appendChild(a);\n  \t\t\ta.click();\n  \t\t\tsetTimeout(function() {\n  \t\t\t\tdocument.body.removeChild(a);\n  \t\t\t\twindow.URL.revokeObjectURL(url);\n  \t\t\t}, 0);\n  \t\t}\n  \t}\n\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadData();\n\t\tdocument.addEventListener(\"keypress\", this.downloadData);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener(\"keypress\", this.downloadData);\n\t}\n\n\trender() {\n\t\t// console.log(\"render\", this.state)\n\n\t\treturn (\n\t\t\t<div className = \"trasformare main\">\n\t\t\t\t<div className = \"top-nav navigations\">\n\t\t\t\t\t<MainMenu className = \"main-menu\" style = {{gridColumn: 'span 1'}}/>\n\t\t\t\t\t<PageTitle title = {this.props.title} style = {{gridColumn: 'span 10'}}/>\n\n\t\t\t\t\t{ this.state.isLoading && < Loading style = {{gridColumn: 'span 3'}}/> }\n\t\t\t\t\t{\t!this.state.isLoading &&\n\t\t\t\t\t\t<Options title = \"Cerca per\"\n\t\t\t\t\t\t\tdata = {this.state.cerca_per}\n\t\t\t\t\t\t\tstyle = {{gridColumn: 'span 3'}}\n\t\t\t\t\t\t\tchangeOptions = {this.changeCercaPer}\n\t\t\t\t\t\t/> }\n\n\t\t\t\t\t{\tthis.state.isLoading && <Loading style = {{gridColumn: 'span 8'}}/>}\n\t\t\t\t\t{\t!this.state.isLoading &&\n\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\tstyle = {{gridColumn: 'span 8'}}\n\t\t\t\t\t\t\tdata = {this.state.ricerca}\n\t\t\t\t\t\t\tchangeOptions = {this.changeRicerca}\n\t\t\t\t\t\t/> }\n\t\t\t\t\t<MoreInfo style = {{gridColumn: 'span 1'}}/>\n\t\t\t\t\t<Bussola style = {{gridColumn: 'span 1'}}/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className = \"the-body-viz\" >\n\t\t\t\t\t{this.state.isLoading && <Loading/>}\n\t\t\t\t\t{\t!this.state.isLoading &&\n\t\t\t\t\t\t<PlacesMatrix\n\t\t\t\t\t\t\tdata = {this.state.data}\n\t\t\t\t\t\t\toriginalData = {this.state.originalData}\n\t\t\t\t\t\t\tfilter = {this.state.filter}\n\t\t\t\t\t\t\tsearched = {this.state.toPreserveRicerca}\n\t\t\t\t\t\t\ttimeFilter = {this.state.timeFilter}\n\t\t\t\t\t\t\tgruppi = {this.state.gruppi.options.filter(d => d.status)[0].label}\n\t\t\t\t\t\t\tonChangeCategorie = {this.changeCategorie}\n\t\t\t\t\t\t\tresetFilter = {this.resetFilter}\n\t\t\t\t\t\t/> }\n\t\t\t\t</div>\n\n\t\t\t\t<div className = \"bottom-nav navigations\">\n\n\t\t\t\t\t{this.state.isLoading && <Loading style={{ gridColumn: 'span 5' }}/>}\n\t\t\t\t\t{\t!this.state.isLoading &&\n\t\t\t\t\t\t<Options title = \"Gruppi\"\n\t\t\t\t\t\t\tdata = {this.state.gruppi}\n\t\t\t\t\t\t\tstyle = {{gridColumn: 'span 5',textAlign: 'center'}}\n\t\t\t\t\t\t\tchangeOptions = {this.changeGruppi}\n\t\t\t\t\t\t/> }\n\n\t\t\t\t\t{\tthis.state.isLoading && <Loading style = {{gridColumn: 'span 5'}}/>}\n\t\t\t\t\t{\t!this.state.isLoading &&\n\t\t\t\t\t\t<Options\n\t\t\t\t\t\t\ttitle = \"Pubblicazioni\"\n\t\t\t\t\t\t\tdata = {this.state.pubblicazioni}\n\t\t\t\t\t\t\tstyle = {{gridColumn: 'span 5', textAlign: 'center'}}\n\t\t\t\t\t\t\tchangeOptions = { this.changePubblicazioni }\n\t\t\t\t\t\t/> }\n\n\t\t\t\t\t{\tthis.state.isLoading && <Loading style = {{gridColumn: 'span 5'}}/>}\n\t\t\t\t\t{\t!this.state.isLoading &&\n\t\t\t\t\t\t<Options\n\t\t\t\t\t\t\ttitle = \"Contesti\"\n\t\t\t\t\t\t\tdata = {this.state.ambienti}\n\t\t\t\t\t\t\tstyle = {{gridColumn: 'span 5', textAlign: 'center'}}\n\t\t\t\t\t\t\tchangeOptions = {this.changeAmbienti}\n\t\t\t\t\t\t/> }\n\n\t\t\t\t\t{ this.state.isLoading && <Loading style = {{gridColumn: 'span 9'}}/>}\n\t\t\t\t\t{\t!this.state.isLoading &&\n\t\t\t\t\t\t<RangeFilter\n\t\t\t\t\t\t\tstyle = {{gridColumn: 'span 9'}}\n\t\t\t\t\t\t\tdata = {this.state.timeExtent}\n\t\t\t\t\t\t\tchangeOptions = {this.changeTimeSpan}\n\t\t\t\t\t\t/> }\n\t\t\t\t</div>\n\t\t\t</div >\n\t\t);\n\t}\n}\n\nexport default Trasformare;\n","\nimport React from 'react';\n\nimport HamburgerIntroHeader from '../../headers/HamburgerIntroHeader/HamburgerIntroHeader';\n\nimport '../../App.css';\nimport './Itineraries.css';\nimport '../../general/GridsWithScrollableColumns/GridWithScrollableLeftColumn.css';\nimport '../../general/GridsWithScrollableColumns/ScrollableColumn.css';\n\nexport default class Itineraries extends React.Component\n{\n  render()\n  {\n    return (\n      <>\n        <HamburgerIntroHeader />\n        <div className=\"grid-with-scrollable-left-column\">\n          <div className=\"scrollable-column-2 col-md-12 col-lg-8\">\n            <h1 className=\"doubt\">Il Dubbio</h1>\n            <p>Nell’itinerario che pone al centro il dubbio, si tenterà di analizzare un fenomeno che tende a dilagare nell’opera di Calvino, soprattutto a partire dagli anni Sessanta. Tormentato da un dubbio fondamentale, che riguarda la capacità delle parole di dire le cose giuste, il testo torna continuamente indietro per cancellarsi e ricominciare. Trovando nel processo di negazione, rettifica e riformulazione una paradossale ma potente spinta narrativa: la scrittura si disperde nel dubbio e nello stesso tempo si salva, perché s’inventa un modo per non finire mai. Il testo dubitativo è un testo dove a un certo punto la nebbia sale, confondendo ogni cosa: da una parte c’è la grande paura di avere sbagliato strada, dall’altra quella di non vedere più nulla. In mezzo dovremo riconoscere la prossimità che la letteratura ha con la morte, mentre cammina in bilico sul suo rovescio vuoto e contempla la cancellazione di tutto quello che riuscirà a dire. Prima ancora di averlo detto.</p>\n            <h1 id=\"space\">Lo Spazio</h1>\n            <p>\n            Nell’itinerario che pone al centro lo spazio, si tenterà di analizzare i modi in cui Calvino ha usato lo spazio per parlare della realtà. E nello stesso tempo per negarla. Perché un momento dopo averla nominata, la realtà si è già trasformata in qualcos’altro. Le parole, che vorrebbero fermare le cose in un punto dello spazio, si perdono in un inseguimento senza fine. Nell’opera di Calvino lo spazio sembra avere più importanza del tempo. Tale predominanza spaziale sembra inoltre essere collegata a quella “visuale” che caratterizza la sua scrittura. In quale misura tali impressioni siano vere e quali forme prendano nel corso del tempo è ciò che dovremo riuscire a capire meglio, percorrendo questo itinerario che ci porterà nel cuore stesso dell’idea di letteratura di Calvino. Sia che racconti della Liguria biografica sia che ci trasporti nell’astrazione cosmica, infatti, Calvino ci dimostra come la letteratura sia il più sofisticato strumento che l’umanità abbia per interrogarsi sul complesso e fondamentale rapporto che la realtà intrattiene con la finzione.</p>\n            <h1 id=\"shape\">La Forma</h1>\n            <p>Nell’itinerario che pone al centro la forma, si tenterà di studiare i modi in cui la scrittura di Calvino si sforza di dare forma alla realtà. Se esiste una battaglia delle battaglie che la letteratura ha il dovere di combattere, come un nobile paladino dell’esercito di Carlo Magno, questa è per Calvino la battaglia contro l’informe. L’informe che ci assedia e minaccia da ogni parte. Vincerla forse è impossibile, ma bisogna continuare a provarci. In che modo? Schierando per esempio le parole in lunghe file di elenchi, che facciano argine al caos; o al contrario lo riproducano, quel caos dilagante, nel tentativo di padroneggiarlo. Oppure costruendo elaborate strutture fatte di racconti in serie, concatenati. Per Calvino, l’arma della combinazione sembra sia quella che possa salvarci dall’assedio del magma. Alla ricerca di una trama che ormai il Novecento ha messo in soffitta da tempo, Calvino sperimenta le forme narrative più varie nel corso della sua carriera letteraria. Anche se forse non erano altro che travestimenti di un’unica trama, elementare e ossessiva.</p>\n          </div>\n          <div className=\"unscrollable-column col-md-12 col-lg-8\">\n            <h1>I TRE ITINERARI</h1>\n            <p>\n              I tre itinerari sono autonomi, ma profondamente interconnessi. Prima viene il dubbio, elevato da Calvino a strumento conoscitivo e narrativo fondamentale. Poi lo spazio, che àncora la scrittura alla realtà e insieme la sbalza nell’astrazione. Infine il tormento principale: quello della forma che l’opera deve prendere. Quale trama inventarsi per chiamare dentro il testo lettori e lettrici? Il dubbio crea lo spazio del racconto, mentre il suo plot si costruisce e si disfa davanti ai nostri occhi come una tela di Penelope. </p>\n          </div>\n        </div>\n\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport HamburgerIntroHeader from '../../headers/HamburgerIntroHeader/HamburgerIntroHeader';\nimport '../../App.css';\n\nclass Footer extends React.Component\n{\n  render(){\n  return (\n\n      <footer className=\"footer text-center\">\n      <div className=\"container\">\n      <p className=\"\">© 2017-2019 – Atlante Calvino: letteratura e visualizzazione</p></div>\n</footer>\n  );\n}\n}\n\nexport default Footer;\n","\nimport React from 'react';\n\nimport HamburgerIntroHeader from '../../headers/HamburgerIntroHeader/HamburgerIntroHeader';\nimport Footer from '../../headers/Footer/Footer';\n\nimport '../../general/GridsWithScrollableColumns/GridWithScrollableLeftColumn.css';\nimport '../../general/GridsWithScrollableColumns/ScrollableColumn.css';\nimport '../../App.css';\n\nexport default class AboutAndContacts extends React.Component\n{\n  render()\n  {\n    return (\n      <>\n        <HamburgerIntroHeader />\n        <div className=\"grid-with-scrollable-left-column\">\n          <div className=\"scrollable-column-2 col-md-8 col-lg-8\">\n            <h1>ABOUT</h1>\n          <h5>  <strong>\n            Équipe letteraria, Unité d'italien<br/>\n            Département de langues et littératures romanes,<br/>\n            Université de Genève\n            </strong></h5>\n              <br/>\n                <br/>\n            <p>\n            L'équipe letteraria del progetto lavora all'interno dell'Unità d'italiano del Département de langues et littératures romanes dell'Université de Genève.\n            <br/>Il gruppo riunisce specialiste di critica letteraria e in particolare dell'opera di Italo Calvino, che affronteranno l'analisi dell'intero corpus narrativo calviniano, articolando i risultati della loro ricerca in modalità compatibili con gli strumenti di visualizzazione sviluppati dal DensityDesign Research Lab.</p>\n            <br/>\n            <br/>\n            <ul>\n              <li>Francesca Serra</li>\n              <li>Valeria Cavalloro</li>\n              <li>Virginia Giustetto</li>\n              <li>Margherita Parigini</li>\n            </ul>\n\n            <br/>\n            <br/>\n            <h5><strong>DensityDesign Research Lab,<br/>\n            Dipartimento di Design, Politecnico di Milano</strong><br/></h5>  <br/>\n                <br/>\n            <p>Il laboratorio di ricerca DensityDesign è parte del Dipartimento di Design del Politecnico di Milano.\n            Obiettivo del laboratorio è la rappresentazione di fenomeni complessi di natura sociale, organizzativa o urbana. A questi temi va aggiunto il crescente interesse per le Digital Humanities, ed in particolare per tutto ciò che sta all'intersezione fra le materie umanistiche e l'information design, come la progettazione di artefatti e metodi digitali per l'elaborazione, l'accesso e la visualizzazione dell'informazione.</p>\n\n            <br/>\n            <br/>\n            <ul>\n              <li>Michele Mauri</li>\n              <li>Tommaso Elli</li>\n              <li>Ángeles Briones</li>\n              <li>Beatrice Gobbo</li>\n              <li>Gabriele Colombo</li>\n              <li>Marco Pappalepore</li>\n              <li>Serena Del Nero</li>\n              <li>Paolo Ciuccarelli</li>\n            </ul>\n\n          </div>\n          <div className=\"unscrollable-column col-md-8 col-lg-8\">\n            <h1>CONTATTI</h1>\n            <address>\n              <ul>\n                <li>Mail: <a href=\"mailto:atlantecalvino@unige.ch\">atlantecalvino@unige.ch</a></li>\n                <li>Twitter: <a href=\"https://twitter.com/intent/tweet?screen_name=AtlanteCalvino&ref_src=twsrc%5Etfw\" class=\"twitter-mention-button\" data-show-count=\"false\">@AtlanteCalvino</a><script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></li>\n              </ul>\n            </address>\n          </div>\n        </div>\n        <Footer />\n      </>\n\n\n    );\n  }\n}\n","\nimport React from 'react';\n\nimport '../../App.css';\nimport './ToolsAndMethods.css';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\n\n\nexport default class ToolMethodCell extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.renderMethodCell = this.renderMethodCell.bind(this);\n    this.renderToolCell = this.renderToolCell.bind(this);\n  }\n\n  render()\n  {\n    switch(this.props.type)\n    {\n      case \"method\" : return this.renderMethodCell();\n      case \"tool\" : return this.renderToolCell();\n      default : throw `type not recognized : ${this.props.type}`;\n    }\n  }\n\n  renderMethodCell()\n  {\n    return (\n      <div className=\"method-cell\">\n        <span className=\"method-type-box\">METODOLOGIA</span>\n        <br/>\n        <br/>\n        <h1>{this.props.title}</h1>\n        <p>{this.props.description}</p>\n      </div>\n    );\n  }\n\n  renderToolCell()\n  {\n    return (\n      <div className=\"tool-cell\">\n        <span className=\"tool-type-box\">STRUMENTO</span>\n        <br/>\n        <br/>\n        <h1>{this.props.title}</h1>\n        <p>{this.props.description}</p>\n      </div>\n    );\n  }\n}\n","\nimport React from 'react';\n\nimport HamburgerIntroHeader from '../../headers/HamburgerIntroHeader/HamburgerIntroHeader';\nimport ToolMethodCell from './ToolMethodCell';\nimport Footer from '../../headers/Footer/Footer';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\n\nimport '../../App.css';\nimport './ToolsAndMethods.css';\nimport '../../general/GridsWithScrollableColumns/GridWithScrollableColumn.css';\nimport '../../general/GridsWithScrollableColumns/ScrollableColumn.css';\n\nexport default class ToolsAndMethods extends React.Component\n{\n  render()\n  {\n    return (\n      <>\n        <HamburgerIntroHeader />\n        <div className=\"grid-with-scrollable-column \">\n          <div className=\"scrollable-column-3 col-lg-10\">\n            <h1>STRUMENTI</h1>\n        <ToolMethodCell type=\"tool\" title=\"Wanderer\" description=\"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur\"/>\n\n        <img src={'/wanderer1.png'} className=\"img-fluid image\"/>\n        </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n","\nimport React from 'react';\n\nimport * as d3 from 'd3';\n\nimport HamburgerIntroHeader from '../../headers/HamburgerIntroHeader/HamburgerIntroHeader';\nimport Footer from '../../headers/Footer/Footer';\n\nimport '../../general/GridsWithScrollableColumns/GridWithScrollableColumn.css';\nimport '../../general/GridsWithScrollableColumns/ScrollableColumn.css';\n\nexport default class PressReview extends React.Component\n{\n  constructor(props){\n    super(props);\n\n    this.state = {\n      data: []\n    }\n  }\n\n  componentDidMount() {\n    console.log('press review')\n    d3.tsv('https://docs.google.com/spreadsheets/d/e/2PACX-1vQTLGjZLV0-w_72af5IdeY9kNUA6FTqjWdGfR1LGfLz5ix5CusACEWo0jB77hHdKRM2hPegDYawAoXo/pub?output=tsv').then(data => {\n      this.setState({data: data})\n    })\n  }\n\n  render()\n  {\n    console.log(this.state)\n    return (\n      <>\n        <HamburgerIntroHeader />\n        <div className=\"grid-with-scrollable-column\">\n          <div className=\"scrollable-column-3 col-md-12 col-lg-8\">\n            <h1>RASSEGNA STAMPA</h1>\n            {\n              this.state.data.filter(d=>d.section===\"Rassegna\").map((d,i)=>{\n                let externalLink;\n                if (d.link!=='') {\n                  externalLink = (<><a href={d.link} target=\"_blank\">Link esterno</a></>);\n                }\n                let archiveLink;\n                if (d.archive!=='') {\n                  archiveLink = (<>, <a href={d.archive} target=\"_blank\">Versione archiviata</a></>);\n                }\n                let download;\n                if (d.download!=='') {\n                  download = (<>, <a href={d.download} target=\"_blank\">PDF</a></>);\n                }\n                return (\n                  <div className=\"pubblication-item\" key={i}>\n                    <h3>{d.title}</h3>\n                    <p>{d.venue}, {d.date}, {d.pages}</p>\n                    <h5>{externalLink}{archiveLink}{download}</h5>\n                  </div>\n                )\n              })\n            }\n\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\n//<PressItem href=\"www.corriere.it\" linkText=\"Calvino sul Corriere\" note=\"Corriere della Sera, 10 settembre 2010\" />\n","\nimport React from 'react';\n\nimport * as d3 from 'd3';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faExternalLinkAlt } from '@fortawesome/free-solid-svg-icons';\n// <FontAwesomeIcon icon={faExternalLinkAlt} />\n\nimport HamburgerIntroHeader from '../../headers/HamburgerIntroHeader/HamburgerIntroHeader';\nimport Footer from '../../headers/Footer/Footer';\n\nimport '../../general/GridsWithScrollableColumns/GridWithScrollableColumn.css';\nimport '../../general/GridsWithScrollableColumns/ScrollableColumn.css';\n\nexport default class Articles extends React.Component\n{\n  constructor(props){\n    super(props);\n\n    this.state = {\n      data: []\n    }\n  }\n\n  componentDidMount() {\n    console.log('press review')\n    d3.tsv('https://docs.google.com/spreadsheets/d/e/2PACX-1vQTLGjZLV0-w_72af5IdeY9kNUA6FTqjWdGfR1LGfLz5ix5CusACEWo0jB77hHdKRM2hPegDYawAoXo/pub?output=tsv').then(data => {\n      this.setState({data: data})\n    })\n  }\n\n  render()\n  {\n    console.log(this.state)\n    return (\n      <>\n        <HamburgerIntroHeader />\n        <div className=\"grid-with-scrollable-column\">\n          <div className=\"scrollable-column-3 col-md-12 col-lg-8\">\n            <h1>ARTICOLI</h1><br />\n            {\n              this.state.data.filter(d=>d.section===\"Articoli\").map((d,i)=>{\n                let externalLinkLink;\n                if (d.link!=='') {\n                  externalLinkLink = (<><a href={d.link} target=\"_blank\">Link esterno</a></>);\n                }\n                let archiveLink;\n                if (d.archive!=='') {\n                  archiveLink = (<>, <a href={d.archive} target=\"_blank\">Versione archiviata</a></>);\n                }\n                let download;\n                if (d.download!=='') {\n                  download = (<>, <a href={d.download} target=\"_blank\">PDF</a></>);\n                }\n\n                let pages;\n                if (d.pages!=='') {\n                  pages = (<>{d.pages}, </>);\n                }\n\n                return (\n                  <div className=\"pubblication-item\" key={i}>\n                    <h3>{d.title}</h3>\n                    <h5>{d.venue}, {pages}{d.date}</h5>\n                    <h5>{d.authors}</h5>\n                    <p className=\"pubblication-abstract\">{d.abstract}</p>\n                    <h5>{externalLinkLink}{archiveLink}{download}</h5>\n                  </div>\n                )\n              })\n            }\n        </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n","import React from 'react';\n\nimport {\n  BrowserRouter,\n  Switch,\n  Route\n} from 'react-router-dom';\n\nimport SplashScreen from '../SplashScreen/SplashScreen';\nimport StaticSplashScreen from '../StaticSplashScreen/StaticSplashScreen';\nimport AtlasIntro from '../AtlasIntro/AtlasIntro';\nimport Compass from '../Compass/Compass';\nimport PhenomenaIntro from '../PhenomenaIntro/PhenomenaIntro';\nimport ProcessIntro from '../ProcessIntro/ProcessIntro';\nimport ProblemIntro from '../ProblemIntro/ProblemIntro';\nimport HamburgerMenu from '../HamburgerMenu/HamburgerMenu';\nimport Trasformare from '../../Trasformare';\nimport Itineraries from '../Itineraries/Itineraries';\nimport AboutAndContacts from '../AboutAndContacts/AboutAndContacts';\nimport ToolsAndMethods from '../ToolsAndMethods/ToolsAndMethods';\nimport PressReview from '../PressReview/PressReview';\nimport Articles from '../Articles/Articles';\n\n\nexport default function AtlasRouter()\n{\n  return (\n    <BrowserRouter basename=\"/atlante-calvino-project\">\n\n      <Route exact path=\"/\"><StaticSplashScreen /></Route>\n      <Route exact path=\"/SplashScreen\"><SplashScreen /></Route>\n      <Route exact path=\"/Home\"><HamburgerMenu /></Route>\n      <Route exact path=\"/AtlasIntro\"><AtlasIntro /></Route>\n      <Route exact path=\"/Compass\"><Compass /></Route>\n\n      <Route path=\"/Itineraries/\"><Itineraries /></Route>\n\n      <Route exact path=\"/Phenomena/intro\"><PhenomenaIntro /></Route>\n      <Route exact path=\"/Phenomena/shapeAnalysis\">fenomeni / analisi della forma</Route>\n      <Route exact path=\"/Phenomena/doubtAnalysis\">fenomeni / analisi del dubbio</Route>\n      <Route exact path=\"/Phenomena/spaceAnalysis\">fenomeni / analisi dello spazio</Route>\n\n      <Route exact path=\"/Process/intro\"><ProcessIntro /></Route>\n      <Route exact path=\"/Process/combining\">processi / combinare</Route>\n      <Route exact path=\"/Process/doubting\">processi / dubitare</Route>\n      <Route exact path=\"/Process/transforming\"><Trasformare title=\"Matrice dei luoghi\" /></Route>\n\n      <Route exact path=\"/Problem/intro\"><ProblemIntro /></Route>\n      <Route exact path=\"/Problem/realism\">problema / realismo</Route>\n      <Route exact path=\"/Problem/cancellation\">problema / cancellazione</Route>\n      <Route exact path=\"/Problem/plot\">problema / trama</Route>\n\n      <Route exact path=\"/About\"><AboutAndContacts /></Route>\n      <Route exact path=\"/Tools\"><ToolsAndMethods /></Route>\n      <Route exact path=\"/News\"><PressReview /></Route>\n      <Route exact path=\"/Papers\"><Articles /></Route>\n\n    </BrowserRouter>\n  );\n}\n","import React from 'react';\nimport './general/HK Grotesk/WEB/stylesheet.css';\n\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n// import PlacesMatrixView from './PlacesMatrixView/PlacesMatrixView';\n// import ContainerComp from './ContainerComp/ContainerComp';\nimport AtlasRouter from './views/AtlasRouter/AtlasRouter';\n\nfunction App() {\n  return (\n    <AtlasRouter />\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
(window["webpackJsonpatlante-calvino-project"]=window["webpackJsonpatlante-calvino-project"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(27)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),s=(n(17),n(18),n(3)),c=n(4),l=n(6),u=n(5),d=n(2),h=n(7),p=(n(19),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"the-header",style:this.props.style},this.props.children)}}]),t}(a.Component)),f=(n(20),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},this.props.children)}}]),t}(a.Component)),g=(n(21),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-menu",style:this.props.style},"M")}}]),t}(a.Component)),m=n(1),b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:this.props.style},"Loading ...")}}]),t}(a.Component),y=(n(22),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.checked;this.props.selected(t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"set-option",style:this.props.style},r.a.createElement("h5",null,this.props.title),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",onChange:this.handleChange}),r.a.createElement("span",{className:"slider round"})))}}]),t}(a.Component)),v=y;y.defaultProps={title:"Option"};n(23);var k={initialize:function(e,t,n){k.changeSpan=n;k.margin={top:0,right:15,bottom:e.getBoundingClientRect().height-20,left:15},k.svg=m.u(e),k.width=e.getBoundingClientRect().width-k.margin.left-k.margin.right,k.height=e.getBoundingClientRect().height-k.margin.top-k.margin.bottom,k.svg.append("defs").append("clipPath").attr("id","timeclip").append("rect").classed("clip",!0).attr("x",0).attr("y",k.margin.top).attr("width",k.width+k.margin.left+k.margin.right).attr("height",k.height).attr("transform","translate("+-k.margin.left+","+-k.margin.top+")"),k.x=m.t().range([0,k.width]).domain(m.f(t,(function(e){return e}))),k.xAxis=m.a(k.x),k.brush=m.c().extent([[0,0],[k.width,k.height]]).handleSize(30).on("brush end",x),k.context=k.svg.append("g").attr("class","context").attr("transform","translate("+k.margin.left+","+k.margin.top+")"),k.info=k.context.append("g").selectAll(".info"),k.line=k.context.append("g").selectAll(".info-line"),k.dotted=k.context.append("g").selectAll(".dotted"),k.context.append("line").attr("x1",0).attr("y1",k.height/2).attr("x2",k.width).attr("y2",k.height/2).attr("stroke","var(--dark-green)"),k.context.append("g").attr("class","brush").call(k.brush).call(k.brush.move,k.x.range())},update:function(e){k.info=k.info.data(e,(function(e){return e})),k.info.exit().remove(),k.info=k.info.enter().append("text").attr("class","info").attr("x",(function(e){return k.x(e)})).attr("y",k.height+k.margin.top+12).attr("text-anchor",(function(e,t){return function(e,n,a){return t%2===0?n(e)>=a/4?"end":"start":n(e)<=a/4*3?"start":"end"}(e,k.x,k.width)})).text((function(e){return e.getFullYear()})).merge(k.info),k.line=k.line.data(e,(function(e){return e})),k.line.exit().remove(),k.line=k.line.enter().append("line").attr("class","info-line").attr("stroke","var(--calvino-red)").attr("stroke-width","2px").attr("x1",(function(e){return k.x(e)})).attr("y1",0).attr("x2",(function(e){return k.x(e)})).attr("y2",k.height).merge(k.line),k.dotted=k.dotted.data([e],(function(e,t){return e})),k.dotted.exit().remove(),k.dotted=k.dotted.enter().append("line").attr("class","dotted").attr("x1",k.info._groups[0][0].getBBox().x+k.info._groups[0][0].getBBox().width+5).attr("x2",k.info._groups[0][1].getBBox().x-5).attr("y1",k.height+k.margin.top+6).attr("y2",k.height+k.margin.top+6).attr("stroke-width","1.5px").attr("stroke","var(--dark-green)").attr("stroke-linecap","round").attr("stroke-dasharray","0,15").merge(k.dotted)},destroy:function(e){}},O=k;function x(){if((!m.e.sourceEvent||"zoom"!==m.e.sourceEvent.type)&&m.e.selection){var e=m.e.selection||k.x.range();e=e.map((function(e){return k.x.invert(e)})),"end"===m.e.type&&k.changeSpan(e),e=e.map((function(e){return new Date(e)})),k.update(e)}}var j=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeSpan=n.changeSpan.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"changeSpan",value:function(e){this.props.changeSpan(e)}},{key:"componentDidMount",value:function(){this._chart=O.initialize(this._rootNode,this.props.data,this.changeSpan)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){O.destroy(this._rootNode)}},{key:"_setRef",value:function(e){this._rootNode=e}},{key:"render",value:function(){return r.a.createElement("div",{style:this.props.style},r.a.createElement("h5",null,this.props.title),r.a.createElement("svg",{id:"time-filter",ref:this._setRef.bind(this)}))}}]),t}(a.Component),E=j;j.defaultProps={title:"Time Filter"};var S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.props.changeOptions(t)}},{key:"render",value:function(){return r.a.createElement("div",{style:this.props.style},r.a.createElement("h5",null,this.props.title),r.a.createElement("select",{id:this.props.id,onChange:this.handleChange},this.props.options.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))}}]),t}(a.Component),C=S;S.defaultProps={title:"Select an option"};var N=n(8),w=n.n(N),T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.props.changeOption(e.target.value)}},{key:"render",value:function(){return r.a.createElement("select",{style:this.props.style,onChange:this.handleChange},this.props.options.map((function(e,t){return r.a.createElement("option",{key:t},e)})))}}]),t}(a.Component),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).debounceTyping=w.a.debounce((function(e){n.props.searching(e)}),250),n.handleTyping=n.handleTyping.bind(Object(d.a)(n)),n.selectResult=n.selectResult.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleTyping",value:function(e){e.target.value.length>3&&this.debounceTyping(e.target.value)}},{key:"selectResult",value:function(e){this.props.selectResult(e.target.getAttribute("data-attr"))}},{key:"render",value:function(){var e=this,t={backgroundColor:"peachpuff"};return r.a.createElement("div",{style:this.props.style},r.a.createElement("input",{type:"text",name:"fname",placeholder:"Da dv dgt?",onChange:this.handleTyping}),r.a.createElement("ul",{style:{position:"absolute"}},this.props.previewSearch.slice(0,8).map((function(n,a){return r.a.createElement("li",{style:t,key:a,onClick:e.selectResult,"data-attr":n.values},n.key)}))))}}]),t}(a.Component),A=function(e){function t(e){var n;Object(s.a)(this,t);var a=(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.data.nodes.map((function(e){return e.pubVenueTitle.split(";")}));a=w.a.flattenDeep(a),a=m.n().key((function(e){return e})).entries(a).map((function(e){return e.key}));var r=[];return a.forEach((function(e){var t=n.props.data.nodes.filter((function(t){return t.pubVenueTitle.includes(e)})),a={key:e,values:t.map((function(e){return e.id}))};r.push(a)})),n.state={option:n.props.options[0],previewSearch:[],publicationsTitles:a,nodesByPublicationTitle:r},n.handleSearch=n.handleSearch.bind(Object(d.a)(n)),n.changeOption=n.changeOption.bind(Object(d.a)(n)),n.searching=n.searching.bind(Object(d.a)(n)),n.selectResult=n.selectResult.bind(Object(d.a)(n)),n.resetSearch=n.resetSearch.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSearch",value:function(e){this.props.searchRecord(e)}},{key:"changeOption",value:function(e){var t=this.props.options.filter((function(t){return t.label==e}))[0];this.setState({option:t})}},{key:"searching",value:function(e){var t=this,n=[];(n="raccolta"===this.state.option.label?this.state.nodesByPublicationTitle.filter((function(t){return t.key.toLowerCase().includes(e.toLowerCase())})):m.n().key((function(e){return e[t.state.option.dimension]})).entries(this.props.data.nodes).map((function(e){return{key:e.key,values:e.values.map((function(e){return e.id}))}})).filter((function(t){return t.key.toLowerCase().includes(e.toLowerCase())}))).length&&this.setState({previewSearch:n})}},{key:"selectResult",value:function(e){this.setState({previewSearch:[]}),this.props.searchRecord(e.split(","))}},{key:"resetSearch",value:function(){this.props.resetSearch()}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",{className:"filter-search",style:this.props.style},r.a.createElement("h5",null,this.props.title),r.a.createElement(T,{style:{display:"inline-block"},options:this.props.options.map((function(e){return e.label})),changeOption:this.changeOption}),r.a.createElement(_,{style:{display:"inline-block"},searching:this.searching,previewSearch:this.state.previewSearch,selectResult:this.selectResult}),this.props.search&&this.props.search.length>0&&r.a.createElement("span",{onClick:this.resetSearch},"X"))}}]),t}(a.Component),R=A;A.defaultProps={title:"Search for a Record"};n(26);var L,P,D,z,B,F,M,U,V,W,I,q,H,J,G,X,Y,$,K,Q,Z={parser:function(e){e.forEach((function(e){e.year=new Date(e.year)}));var t=e.map((function(e){return e.year=new Date(e.year),e.id||(e.id=e["data.id"]),{id:e.id,label:e.Occorrenza,part_of:e["Parte di ID"],source:e.Fonte,sourceTitle:e["Titolo Fonte"],year:+e.year,category:e.Categoria,totalSubNodes:0,publicationType:e["Pubblicazione Fonte"],pubVenueTitle:e["Pubblicazioni Titoli"],isGuessed:e["Luogo desunto"],themes:e.Tema}}));return t=Z.handleHierarchies(t),Z.calculateNetwork(t)},handleHierarchies:function(e){var t=m.n().key((function(e){return e.part_of})).entries(e);return t.filter((function(e){return""===e.key}))[0].values.forEach((function(e){var n=t.find((function(t){return t.key===e.id}));n&&(e.subNodes=n.values,e.totalSubNodes=n.values.length,n.values.forEach((function(n){var a=t.find((function(e){return e.key===n.id}));a&&(n.subNodes=a.values,n.totalSubNodes=a.values.length,e.totalSubNodes+=n.totalSubNodes,a.values.forEach((function(n){var a=t.find((function(e){return e.key===n.id}));a&&(n.subNodes=a.values,n.totalSubNodes=a.values.length,e.totalSubNodes+=n.totalSubNodes,a.values.forEach((function(a){var r=t.find((function(e){return e.key===a.id}));r&&(a.subNodes=r.values,a.totalSubNodes=r.values.length,e.totalSubNodes+=n.totalSubNodes)})))})))})))})),t.filter((function(e){return""===e.key}))[0].values},calculateNetwork:function(e){var t=[];return m.n().key((function(e){return e.source})).entries(e).forEach((function(e){e.values.filter((function(e){return""!==e.part_of})).forEach((function(n,a){var r;r={source:n.id,target:n.part_of,volume:e.key,source_part_of:n.part_of,kind:"part_of"},t.push(r)}))})),{nodes:e,edges:t,root_nodes:e.filter((function(e){return e.subNodes}))}}},ee=Z,te={},ne=["generico_non_terrestre","nominato_non_terrestre","nominato_terrestre","generico_terrestre","inventato","no_ambientazione"],ae=["#3131ff","#bbbbff","#ffce00","#ff6c39","#00c19c","#cecece"],re=[],ie=[],oe=[],se=0,ce=!1;function le(){Y.style("opacity",1),$.classed("selected",!1).style("display","none"),(K=K.data([],(function(e){return e.id}))).exit().remove()}function ue(e,t){if(e.opened){e.opened=!1,e.fx=null,e.fy=null;var n=[],a=[e.id];return function e(t){t.subNodes.forEach((function(t){t.opened&&(t.opened=!1,a.push(t.id),e(t))})),n.push(t.subNodes)}(e),n.forEach((function(e){var t=e.map((function(e){return e.id})),n=re.filter((function(e){return!t.includes(e.id)}));(oe=oe.filter((function(e){return!a.includes(e[0].id)}))).forEach((function(e,n){oe[n]=e.filter((function(e){return!t.includes(e.id)}))})),L=ee.calculateNetwork(n)})),void(!1!==t&&te.update(L,P))}if(e.subNodes&&e.subNodes.length){e.subNodes.forEach((function(t,n){n>0&&(t.x=e.x,t.y=e.y)})),e.opened=!0;var r=[e].concat(e.subNodes);oe.push(r),oe.forEach((function(e){e.indexOf(r[0])>0&&r.forEach((function(t,n){0!==n&&e.push(t)}))}));var i=re.concat(e.subNodes);L=ee.calculateNetwork(i),re=L.nodes,ie=L.edges,!1!==t&&te.update(L,P)}else console.log("No nodes to expand")}M={top:0,right:50,bottom:75,left:50},te.initialize=function(e,t,n){(L=t).rootNodes,q=m.u(e).style("touch-action","manipulation"),U=q.node().getBoundingClientRect().width-M.left-M.right,V=q.node().getBoundingClientRect().height-M.top-M.bottom,D=m.t().range([0,U]).domain(m.f(t.nodes,(function(e){return e.year}))),W=m.a(D),z=m.r().range([0,V]).padding(.5),I=m.b(z).tickSize(U).tickFormat((function(e){return e=e.replace(/_/g," ")})),z.domain(ne),B=m.s().exponent(.5).range([3.5,25]).domain([1,m.m(t.nodes,(function(e){return e.totalSubNodes}))]),F=m.q().domain(ne).range(ae),q.append("rect").classed("reset",!0).attr("x",M.left).attr("width",U).attr("height",V).attr("fill","transparent").on("click",le),H=q.append("g").attr("transform","translate(".concat(M.left,",").concat(M.top,")")),J=H.append("g").attr("class","x-axis"),H.append("g").attr("class","y-axis").attr("transform","translate(0, 0)").call(I).call((function(e){return e.selectAll(".tick text").style("text-transform","capitalize")})).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.selectAll(".tick line").attr("stroke-opacity",.5).attr("stroke-dasharray","2,2")})).call((function(e){return e.selectAll(".tick text").attr("x",4).attr("dy",-z.step()/10)})),X=H.append("g").classed("links",!0).selectAll(".link"),G=H.append("g").classed("hulls",!0).selectAll(".hull"),Y=H.append("g").classed("nodes",!0).selectAll(".node"),$=H.append("g").classed("labels",!0).selectAll(".label"),K=H.append("g").classed("informations",!0).selectAll(".information"),Q=m.j(re).force("charge",m.i().strength(-1)).force("link",m.h().strength(.35).distance(B.range()[0]+1).id((function(e){return e.id}))).force("x",m.k((function(e){return e.x})).strength((function(e){return""===e.part_of?1:0}))).force("y",m.l((function(e){return e.y})).strength((function(e){return""===e.part_of?.7:0}))).force("collision",m.g((function(e){return e.opened?B(1)+.75:B(e.totalSubNodes+1)+.75})).iterations(32).strength(.5)).on("tick",(function(){Y.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),$.attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),X.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),G.attr("d",(function(e){var t=e.map((function(e){return[e.x,e.y]})),n=t.length<3?t:m.o(t);return me(n,e)}))})).on("end",(function(){console.log("simulation ended")})).stop(),te.update(t,n)},te.update=function(e,t){e||(e=L),re=e.nodes,ie=e.edges,t&&(P=t,void 0!=t.openAll&&t.openAll!=ce&&(console.log("open or close all",t.openAll),ce=t.openAll),t.timeFilter&&(re=re.filter((function(e){var n=new Date(e.year);return n>=t.timeFilter[0]&&n<=t.timeFilter[1]}))),t.selectedPublications&&("tutti"===t.selectedPublications?Y.classed("faded",!1):Y.classed("faded",!1).classed("faded",(function(e){return"altro"===t.selectedPublications?""==!e.publicationType:!e.publicationType.includes(t.selectedPublications)}))),t.selectedThemes&&("tutti"===t.selectedThemes?Y.classed("faded",!1):Y.classed("faded",!1).classed("faded",(function(e){return!e.themes||!e.themes.includes(t.selectedThemes)}))),t.search&&(t.search.length>0?Y.classed("faded",!0).filter((function(e){return t.search.indexOf(e.id)>-1})).classed("faded",!1):Y.classed("faded",!1))),t.update&&(D.domain(m.f(re,(function(e){return e.year}))),J.attr("transform","translate(".concat(0,", ",V,")")).call(W),e.nodes.forEach((function(e){e.opened&&(e.fx=D(e.year)),e.x=D(e.year),e.y=z(e.category)})),Q.force("x").x((function(e){return e.x})),(Y=Y.data(re,(function(e){return e.id}))).exit().remove(),Y=Y.enter().append("circle").attr("class",(function(e){return"node"})).on("click",(function(e){[e].forEach((function(e){Y.filter((function(t){return t.source!==e.source})).style("opacity",.1),$.filter((function(t){return e.id===t.id})).classed("selected",!0).style("display","block")})),(K=K.data([e],(function(e){return e.id}))).exit().remove(),K=K.enter().append("text").classed("information",!0).classed("label",!0).attr("text-anchor",(function(e){return D(e.year)>=U/2?"end":"start"})).attr("x",(function(e){return D(e.year)>=U/2?D(e.year)+4.8:D(e.year)-3.2})).attr("y",V-10).text((function(e){return D(e.year)>=U/2?e.sourceTitle+" \u2193":"\u2193 "+e.sourceTitle})).merge(K),m.e.timeStamp-se<500&&(e.fx=1*e.x,e.fy=1*e.y,ue(e)),se=m.e.timeStamp})).attr("key",(function(e){return e.id})).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).merge(Y).style("cursor",(function(e){return e.subNodes&&e.subNodes.length?"pointer":"auto"})).attr("fill",(function(e){return!0===e.opened?"white":F(e.category)})).attr("stroke",(function(e){if(e.totalSubNodes>0)return m.d(F(e.category)).darker(.7)})).style("opacity",1).attr("r",(function(e){return e.opened?B(1):B(e.totalSubNodes+1)})),(X=X.data(ie,(function(e){return e.source.id+"-"+e.target.id}))).exit().remove(),X=X.enter().append("line").classed("link",!0).classed("part-of",(function(e){return"part_of"===e.kind})).attr("stroke-width",.5).attr("stroke","#ccc").on("click",(function(e){return console.log(e)})).merge(X),($=$.data(re,(function(e){return e.id}))).exit().remove(),$=$.enter().append("text").classed("label",!0).style("display","none").attr("text-anchor","middle").style("pointer-events","none").text((function(e){return e.label})).merge($),(G=G.data(oe,(function(e){return e[0].id}))).exit().remove(),G=G.enter().append("path").classed("hull",!0).attr("fill",(function(e){return F(e[0].category)})).style("opacity",.25).on("click",(function(e){m.e.timeStamp-se<500&&ue(e[0]),se=m.e.timeStamp})).merge(G),Q.nodes(re),Q.force("link").links(ie),Q.alpha(1).restart())},te.destroy=function(){};var de=te,he=.75,pe=function(e,t){return[e*t[0],e*t[1]]},fe=function(e,t){return[e[0]+t[0],e[1]+t[1]]},ge=function(e,t){var n=[e[1]-t[1],t[0]-e[0]],a=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/a,n[1]/a]},me=function(e,t){if(he=m.m(t,(function(e){return e.opened?B(1)+.75:B(e.totalSubNodes+1)+.75})),!e||e.length<1)return"";if(1===e.length)return be(e,t);if(2===e.length)return ye(e,t);for(var n=new Array(e.length),a=0;a<n.length;++a){var r=0===a?e[e.length-1]:e[a-1],i=e[a],o=pe(he,ge(r,i));n[a]=[fe(r,o),fe(i,o)]}var s="A "+[he,he,"0,0,0,"].join(",");return(n=n.map((function(e,t){var a="";if(0===t)a="M "+n[n.length-1][1]+" ";return a+=s+e[0]+" L "+e[1]}))).join(" ")},be=function(e,t){var n=[e[0][0],e[0][1]-he],a=[e[0][0],e[0][1]+he];return"M "+n+" A "+[he,he,"0,0,0",a].join(",")+" A "+[he,he,"0,0,0",n].join(",")},ye=function(e,t){var n=pe(he,ge(e[0],e[1])),a=pe(-1,n),r=fe(e[0],n),i=fe(e[1],n),o=fe(e[1],a),s=fe(e[0],a);return"M "+r+" L "+i+" A "+[he,he,"0,0,0",o].join(",")+" L "+s+" A "+[he,he,"0,0,0",r].join(",")},ve=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this._chart=de.initialize(this._rootNode,this.props.data,this.props.filters)}},{key:"componentDidUpdate",value:function(){de.update(null,this.props.filters)}},{key:"componentWillUnmount",value:function(){de.destroy(this._rootNode)}},{key:"_setRef",value:function(e){this._rootNode=e}},{key:"render",value:function(){return r.a.createElement("svg",{id:this.props.id,style:{width:"100%",height:"100%"},ref:this._setRef.bind(this)})}}]),t}(a.Component),ke=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).loadData=n.loadData.bind(Object(d.a)(n)),n.state={data:"data still not loaded",isLoading:!0,openAll:!1,filters:{search:[]}},n.openAll=n.openAll.bind(Object(d.a)(n)),n.changeSpan=n.changeSpan.bind(Object(d.a)(n)),n.changePublications=n.changePublications.bind(Object(d.a)(n)),n.changeThemes=n.changeThemes.bind(Object(d.a)(n)),n.searchRecord=n.searchRecord.bind(Object(d.a)(n)),n.resetSearch=n.resetSearch.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"loadData",value:function(){var e=this;m.v("./places-matrix-data.tsv").then((function(e){return ee.parser(e)})).then((function(t){e.setState({data:t,dataTimeFilter:m.f(t.nodes,(function(e){return e.year})),themes:["tutti","fabbrica","guerra","mare","metropoli","natura ligure","paesaggio urbano","protagonista bambino","viaggio"],publicationsTypes:["tutti","raccolta","volume","altro"],searchOptions:[{label:"luogo",dimension:"label"},{label:"raccolta",dimension:"pubVenueTitle"},{label:"titolo",dimension:"sourceTitle"}],isLoading:!1,filters:{update:!0,openAll:!1}})}))}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"changeSpan",value:function(e){this.setState({span:e,filters:{timeFilter:e,update:!0}})}},{key:"changePublications",value:function(e){this.setState({filters:{selectedPublications:e,update:!1}})}},{key:"changeThemes",value:function(e){this.setState({filters:{selectedThemes:e,update:!1}})}},{key:"searchRecord",value:function(e){console.log("search result container",e),this.setState({filters:{search:e,update:!1}})}},{key:"resetSearch",value:function(){console.log("reset search"),this.setState({filters:{search:[],update:!1}})}},{key:"openAll",value:function(e){this.setState({filters:{openAll:e,update:!0}})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p,null,r.a.createElement(g,{style:{gridColumn:"span 1"}}),r.a.createElement("div",{style:{gridColumn:"span 2"}}),r.a.createElement(v,{style:{gridColumn:"span 2",display:"none"},selected:this.openAll,title:"Apri tutto"}),this.state.isLoading&&r.a.createElement(b,{style:{gridColumn:"span 6"}}),!this.state.isLoading&&r.a.createElement(E,{style:{gridColumn:"span 6"},data:this.state.dataTimeFilter,changeSpan:this.changeSpan,title:"Imposta un filtro temporale"}),this.state.isLoading&&r.a.createElement(b,{style:{gridColumn:"span 4"}}),!this.state.isLoading&&r.a.createElement(C,{style:{gridColumn:"span 4"},options:this.state.publicationsTypes,changeOptions:this.changePublications,title:"Tipo di pubblicazione"}),this.state.isLoading&&r.a.createElement(b,{style:{gridColumn:"span 4"}}),!this.state.isLoading&&r.a.createElement(C,{style:{gridColumn:"span 4"},options:this.state.themes,changeOptions:this.changeThemes,title:"Evidenzia un tema"}),this.state.isLoading&&r.a.createElement(b,{style:{gridColumn:"span 6"}}),!this.state.isLoading&&r.a.createElement(R,{style:{gridColumn:"span 6"},data:this.state.data,options:this.state.searchOptions,searchRecord:this.searchRecord,search:this.state.filters.search,resetSearch:this.resetSearch,title:"Cerca"}),r.a.createElement("div",{style:{gridColumn:"span 1"}},"help")),r.a.createElement(f,{className:"the-body-viz"},this.state.isLoading&&r.a.createElement(b,null),!this.state.isLoading&&r.a.createElement(ve,{data:this.state.data,filters:this.state.filters})))}}]),t}(a.Component);var Oe=function(){return r.a.createElement(ke,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[12,1,2]]]);
//# sourceMappingURL=main.c98304f3.chunk.js.map